(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,n){e.exports=n.p+"static/media/viikkis.86ac6c38.png"},129:function(e,t,n){e.exports=n(271)},197:function(e,t,n){},201:function(e,t,n){},262:function(e,t){},267:function(e,t,n){},269:function(e,t,n){},271:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"types",function(){return X}),n.d(a,"setState",function(){return q}),n.d(a,"getArticles",function(){return Z}),n.d(a,"getWeekArticles",function(){return Q}),n.d(a,"getArticle",function(){return ee}),n.d(a,"deleteArticle",function(){return te}),n.d(a,"updateArticle",function(){return ne}),n.d(a,"createWeek",function(){return ae}),n.d(a,"login",function(){return ie}),n.d(a,"logout",function(){return oe});var i={};n.r(i),n.d(i,"types",function(){return se}),n.d(i,"setConfigState",function(){return le}),n.d(i,"navigate",function(){return ue}),n.d(i,"getConfig",function(){return pe}),n.d(i,"updateConfig",function(){return de}),n.d(i,"navigateHome",function(){return fe}),n.d(i,"setNextWeek",function(){return me}),n.d(i,"setPrevWeek",function(){return he});var o={};n.r(o),n.d(o,"setLocale",function(){return ke});n(130);var r=n(1),c=n.n(r),s=n(24),l=n.n(s),u=n(7),p=n(8),d=n(11),f=n(9),m=n(10),h=n(13),g=n(275),k=n(276),E=n(277),v=n(278),y=n(279),b=n(280),x=n(122),j=n(119),w=n.n(j),C="http://viikkis.indecs.fi/api.php",O=[{fi:"Yleist\xe4",en:"General"},{fi:"Indecsin tapahtumat",en:"Indecs events"},{fi:"TREY tiedottaa",en:"Student Union announces"},{fi:"Tampereen Teekkarit tiedottaa",en:"Teekkari Union of Tampere announces"},{fi:"Yritystiimi tiedottaa",en:"Corporate Relations Team announces"},{fi:"Tulevat tapahtumat",en:"Upcoming events"},{fi:"ESTIEM asiaa",en:"ESTIEM affairs"},{fi:"Loppukevennys",en:""}],T="SUMMARY",_="ARTICLE",A="CONFIG_SETTINGS",I=n(293),N=n(272),S=n(273),L=n(274),M=n(12),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return e.map(function(e){return t[e]={NAME:e,PENDING:"".concat(e,"_PENDING"),FULFILLED:"".concat(e,"_FULFILLED"),REJECTED:"".concat(e,"_REJECTED")}}),t},W=n(26),R=n.n(W),G=n(37),F=n(15),P=n.n(F),V="GET",K="POST",z="PUT",U="DELETE",Y="PATCH",H="HEAD",B="MULTIPARTPOST",J=function(e,t,n,a){var i;switch(e){case V:i=P.a.get(t,a);break;case K:i=P.a.post(t,n,a);break;case z:i=P.a.put(t,n,a);break;case U:i=P.a.delete(t,a);break;case Y:i=P.a.patch(t,n,a);break;case H:i=P.a.head(t,a);break;case B:a.headers={"content-type":"multipart/form-data"},i=P.a.post(t,n,a);break;default:i=n}return i},$=function(e){var t=e.year,n=e.week;return J(V,"".concat(C,"/articles?year=").concat(t,"&week=").concat(n))},X=D(["SET_STATE","GET_ARTICLES","UPDATE_ARTICLE","CREATE_WEEK","GET_ARTICLE","DELETE_ARTICLE","LOGIN","LOGOUT","GET_TEXT","GET_WEEK_ARTICLES","GET_WEEK_CONFIG"]),q=function(e){return{type:X.SET_STATE.NAME,payload:e}},Z=function(){return{type:X.GET_ARTICLES.NAME,payload:J(V,"".concat(C,"/articles"))}},Q=function(e){var t=e.year,n=e.week;return{type:X.GET_WEEK_ARTICLES.NAME,payload:$({year:t,week:n})}},ee=function(e){return{type:X.GET_ARTICLE.NAME,payload:function(e){return J(V,"".concat(C,"/articles/").concat(e))}(e)}},te=function(e){return{type:X.DELETE_ARTICLE.NAME,payload:function(e){return J(U,"".concat(C,"/articles/").concat(e))}(e)}},ne=function(e){var t=e.id,n=e.text;return{type:X.UPDATE_ARTICLE.NAME,payload:function(e){var t=e.id,n=e.text;return J(z,"".concat(C,"/articles/").concat(t),JSON.stringify({text:n}))}({id:t,text:n})}},ae=function(e){return{type:X.CREATE_WEEK.NAME,payload:function(e){return P.a.all(e.map(function(){var e=Object(G.a)(R.a.mark(function e(t){var n;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.post("".concat(C,"/articles"),JSON.stringify(t));case 2:return n=e.sent,e.abrupt("return",Object(M.a)({},t,{id:n.data,edited_at:"0000-00-00 00:00:00",created_at:(new Date).toISOString()}));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()))}(e)}},ie=function(e){var t=e.email,n=e.password;return{type:X.LOGIN.NAME,payload:function(e){var t=e.email,n=e.password;return J(K,"".concat("http://viikkis.indecs.fi/login.php"),JSON.stringify({email:t,password:n}))}({email:t,password:n})}},oe=function(){return{type:X.LOGOUT.NAME}},re=n(17),ce=n.n(re),se=D(["SET_CONFIG_STATE","NAVIGATE","NAVIGATE_HOME","GET_CONFIG","UPDATE_CONFIG"]),le=function(e){return{type:se.SET_CONFIG_STATE.NAME,payload:e}},ue=function(e){return{type:se.NAVIGATE.NAME,payload:e}},pe=function(){return{type:se.GET_CONFIG.NAME,payload:P.a.get("".concat(C,"/config/1"))}},de=function(e){return{type:se.UPDATE_CONFIG.NAME,payload:(t=e,P.a.put("".concat(C,"/config/1"),JSON.stringify(t)))};var t},fe=function(){return function(e){e({type:se.NAVIGATE_HOME.NAME})}},me=function(){return function(e,t){var n=ce()(t().config.now).add(1,"weeks"),a=parseInt(n.format("WW")),i=parseInt(n.format("YYYY"));return e(le({now:n,week:a,year:i})),e(Q({week:a,year:i}))}},he=function(){return function(e,t){var n=ce()(t().config.now).subtract(1,"weeks"),a=parseInt(n.format("WW")),i=parseInt(n.format("YYYY"));return e(le({now:n,week:a,year:i})),e(Q({week:a,year:i}))}},ge=D(["SET_LOCALE"]),ke=function(e){return{type:ge.SET_LOCALE.NAME,payload:e}},Ee=n(25),ve=n(57),ye={app:a,config:i,locale:o},be=function(e,t){return Object(ve.b)(e,function(e){return function(){return Object(Ee.b)(Object(M.a)({},t),e)}})};var xe=be(function(e){return{email:e.app.user.email,logged:e.app.logged,socketsLength:e.app.sockets.length,isAdmin:e.app.user.admin}},{logout:ye.app.logout,navigate:ye.config.navigate})(function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).state={dropdownOpen:!1},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"logout",value:function(){localStorage.removeItem("email"),localStorage.removeItem("password"),this.props.logout()}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement("div",{style:je.top},c.a.createElement("div",{style:je.left},c.a.createElement("img",{src:w.a,alt:"Viikkis Indecs",style:{height:60}})),this.props.logged&&c.a.createElement("div",{style:je.right},c.a.createElement(function(){return c.a.createElement(I.a,{isOpen:e.state.dropdownOpen,toggle:function(){return e.setState({dropdownOpen:!e.state.dropdownOpen})},direction:"left"},c.a.createElement(N.a,null,c.a.createElement("i",{className:"fa fa-bars",style:{fontSize:30,color:"white"}})),c.a.createElement(S.a,null,c.a.createElement(L.a,{header:!0},e.props.email),c.a.createElement(L.a,{divider:!0}),c.a.createElement(L.a,{disabled:!0},c.a.createElement("i",{className:"fa fa-users",style:{marginRight:5}})," ",e.props.socketsLength," paikalla"),c.a.createElement(L.a,{divider:!0}),c.a.createElement(L.a,{disabled:!e.props.isAdmin,onClick:function(){return e.props.navigate(A)}},c.a.createElement("i",{className:"fa fa-cog",style:{marginRight:5}})," Asetukset"),c.a.createElement(L.a,{divider:!0}),c.a.createElement(L.a,{onClick:function(){return e.logout()}},c.a.createElement("i",{className:"fa fa-sign-out-alt",style:{marginRight:5}}),"Kirjaudu ulos")))},null))))}}]),t}(r.Component)),je={top:{backgroundColor:"rgba(0,0,0,0.5)",height:60,width:"100%",display:"flex",flexDirection:"row",flex:1,color:"white",justifyContent:"space-between"},left:{display:"flex",alignItems:"center",cursor:"pointer"},users:{position:"absolute",top:5,right:5,fontSize:15,color:"white"},right:{display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:10,cursor:"pointer"}},we=be(function(e){return null},{login:ye.app.login})(function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).state={email:"",password:"",rememberMe:!1},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"login",value:function(){var e=this;this.props.login({password:this.state.password,email:this.state.email}).then(function(){e.state.rememberMe&&(localStorage.setItem("email",e.state.email),localStorage.setItem("password",e.state.password))}).catch(function(){return h.toast.error("V\xe4\xe4r\xe4 k\xe4ytt\xe4j\xe4tunnus tai salasana")})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(xe,null),c.a.createElement("div",{style:Ce.wrapper},c.a.createElement(g.a,{style:Ce.container},c.a.createElement("h2",null,"Kirjaudu sis\xe4\xe4n"),c.a.createElement(k.a,{className:"form"},c.a.createElement(E.a,null,c.a.createElement(v.a,null,c.a.createElement(y.a,null,"S\xe4hk\xf6posti"),c.a.createElement(b.a,{type:"email",name:"email",id:"exampleEmail",placeholder:"sposti@sposti.com",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}}))),c.a.createElement(E.a,null,c.a.createElement(v.a,null,c.a.createElement(y.a,{for:"examplePassword"},"Salasana"),c.a.createElement(b.a,{type:"password",name:"password",id:"examplePassword",placeholder:"********",onChange:function(t){return e.setState({password:t.target.value})},value:this.state.password}))),c.a.createElement(E.a,null,c.a.createElement(v.a,{check:!0},c.a.createElement(y.a,{check:!0},c.a.createElement(b.a,{id:"rememberMe",type:"checkbox",value:this.state.rememberMe,onChange:function(t){return e.setState({rememberMe:t.target.value})}})," "," Muista minut"))),c.a.createElement(x.a,{onClick:function(){return e.login()}},"Kirjaudu sis\xe4\xe4n")))))}}]),t}(r.Component)),Ce={container:{boxShadow:"#999 0 0 12px",borderRadius:"4px",backgroundColor:"white",padding:20,margin:10},wrapper:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,bottom:0,right:0}},Oe=n(31),Te=(n(197),n(3)),_e=n.n(Te);function Ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=e.value;if(e.selectionStart||0===e.selectionStart){var o=e.selectionStart,r=e.selectionEnd,c=e.scrollTop;o===r?(e.value=i.substring(0,o)+t+n+a+i.substring(r,i.length),e.selectionStart=o+t.length,e.selectionEnd=r+t.length+n.length):(e.value=i.substring(0,o)+t+i.substring(o,r)+a+i.substring(r,i.length),e.selectionStart=o+t.length,e.selectionEnd=r+t.length),e.focus(),c>=0&&(e.scrollTop=c)}}var Ie={h1:function(e){Ae(e,"# ","Iso otsikko")},h2:function(e){Ae(e,"## ","Keskikokoinen otsikko")},h3:function(e){Ae(e,"### ","Pieni otsikko")},bold:function(e){Ae(e,"**","Lihavoitu teksti","**")},italic:function(e){Ae(e,"*","Kursivoitu teksti","*")},image:function(e){Ae(e,"![Kuvan vaihtoehtoinen teksti jos kuva ei toimi](","https://indecs.fi/indecs-fi/wp-content/uploads/2019/01/Indecs_logo_teksti.png",")")},link:function(e){Ae(e,"[FB-tapahtuma](","http://www.facebook.com",")")},linkButton:function(e){Ae(e,"?[FB-tapahtuma](","http://www.facebook.com",")")},code:function(e){Ae(e,"```\n","Lainaus","\n```")},list:function(e){Ae(e,"Lista 1  \nLista 2  \n","Lista 3","  ")},listUl:function(e){Ae(e,"- Lista 1\n- Lista 2\n- ","Lista 3")},listOl:function(e){Ae(e,"1. Lista 1\n2. Lista 2\n","3. Lista 3")},table:function(e){Ae(e,"| Otsikko 1 | Otsikko 2 | Otsikko 3 |\n | - | - | - | \n| ","t\xe4h\xe4n"," | tulee | sis\xe4lt\xf6 |\n| toisen | rivin | sis\xe4lt\xf6 |")},tab:function(e){Ae(e,"  ")}},Ne=function(e,t){return Ie[t](e)},Se=66,Le=73,Me=83,De=90,We=89,Re=9,Ge=(n(199),n(201),n(39)),Fe=n(21),Pe=n.n(Fe),Ve=n(203);Ve.registerLanguage("css",n(204)),Ve.registerLanguage("json",n(205)),Ve.registerLanguage("less",n(206)),Ve.registerLanguage("scss",n(207)),Ve.registerLanguage("javascript",n(208)),Ve.registerLanguage("typescript",n(209));var Ke=Ve;Pe.a.setOptions({renderer:new Pe.a.Renderer,gfm:!0,tables:!0,breaks:!1,pedantic:!0,sanitize:!1,smartLists:!0,smartypants:!1,highlight:function(e){return Ke.highlightAuto(e).value}});var ze=function(e){return function(e,t){var n=e,a=!0,i=!1,o=void 0;try{for(var r,c=t[Symbol.iterator]();!(a=(r=c.next()).done);a=!0){var s=r.value,l=Object(Ge.a)(s,2),u=l[0],p=l[1];n=n.replace(u,p)}}catch(d){i=!0,o=d}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,[[/\?\[(.+?)\]\((.*\))/g,Je("$1","$2")]])},Ue=0,Ye=0,He=0,Be=new Pe.a.Renderer,Je=function(e,t){return'<button class="customButton" href="'.concat(t,'">').concat(e,"</button>")};Be.paragraph=function(e){return"<p>".concat(e,"</p>")},Be.link=function(e,t,n){return"<a href=".concat(e,"\n      title=").concat(t||e,"\n      }>").concat(n,"</a>")},Be.heading=function(e,t,n){return 1==t?(He=0,Ye=0,Ue+=1,"<h".concat(t,' id="toc_').concat(Ue,'">').concat(Ue,". ").concat(e,"</h").concat(t,">")):2==t?(He=0,Ye+=1,"<h".concat(t,' id="toc_').concat(Ue,"_").concat(Ye,'">').concat(Ue,".").concat(Ye,". ").concat(e,"</h").concat(t,">")):(He+=1,"<h".concat(t,' id="toc_').concat(Ue,"_").concat(Ye,"_").concat(He,'">').concat(Ue,".").concat(Ye,".").concat(He,". ").concat(e,"</h").concat(t,">"))};Pe.a.setOptions({renderer:new Pe.a.Renderer,gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1,highlight:function(e){return Ke.highlightAuto(e).value}});var $e=new Pe.a.Renderer,Xe=0,qe=0,Ze=0,Qe=function(e){return e},et=function(e){var t,n;return function(e,t){var n=e,a=!0,i=!1,o=void 0;try{for(var r,c=t[Symbol.iterator]();!(a=(r=c.next()).done);a=!0){var s=r.value,l=Object(Ge.a)(s,2),u=l[0],p=l[1];n=n.replace(u,p)}}catch(d){i=!0,o=d}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,[[/\?\[(.+?)\]\((.*\))/g,(t="$1",n="$2","</mj-text><mj-button href=".concat(n,">").concat(t,"</mj-button><mj-text>"))]])};$e.paragraph=function(e){return"<mj-text><p>".concat(Qe(e),"</p></mj-text>\n")},$e.link=function(e,t,n){return t?'<a href="'.concat(Qe(e),'" title="').concat(Qe(t),'">').concat(Qe(n),"</a>"):'<a href="'.concat(Qe(e),'">').concat(Qe(n),"</a>")},$e.heading=function(e,t,n){return 1==t?(Ze=0,qe=0,Xe+=1,'<mj-divider /><mj-text mj-class="heading'.concat(t,'">\n<h').concat(t,' id="toc_').concat(Xe,'">').concat(Xe,". ").concat(Qe(e),"</h").concat(t,"></mj-text>\n")):2==t?(Ze=0,qe+=1,'<mj-text mj-class="heading'.concat(t,'">\n<h').concat(t,' id="toc_').concat(Xe,"_").concat(qe,'">').concat(Xe,".").concat(qe,". ").concat(Qe(e),"</h").concat(t,"></mj-text>\n")):(Ze+=1,'<mj-text mj-class="heading'.concat(t,'">\n<h').concat(t,' id="toc_').concat(Xe,"_").concat(qe,"_").concat(Ze,'">').concat(Xe,".").concat(qe,".").concat(Ze,". ").concat(Qe(e),"</h").concat(t,"></mj-text>\n"))},$e.image=function(e,t,n){return t?'</mj-text><mj-image src="'.concat(e,'" alt="').concat(Qe(n),'" title="').concat(Qe(t),'" /> <mj-text>'):'</mj-text><mj-image src="'.concat(e,'" alt="').concat(Qe(n),'" /> <mj-text>')},$e.table=function(e,t){return"<mj-table>\n".concat(e).concat(t,"</mj-table>\n")},$e.tablerow=function(e){return"<tr>\n".concat(e,"</tr>\n")},$e.tablecell=function(e,t){var n=t.header?"th":"td",a=t.align;return a?"<".concat(n,' style="text-align:').concat(a,'">').concat(Qe(e),"</").concat(n,">\n"):"<".concat(n,">").concat(e,"</").concat(n,">\n")},$e.list=function(e,t,n){var a=t?"ol":"ul";return"<mj-text><".concat(a,">\n").concat(e,"</").concat(a,"></mj-text>\n")},$e.listitem=function(e){return"<li>".concat(Qe(e),"</li>\n")};var tt=function(e,t){return t?"".concat(e," \u2013 ").concat(t):"".concat(e)},nt=function(e){return"object"===typeof e&&(e=e.join("\n\n")),"string"!=typeof(t=it(e))?"":(Ue=0,Ye=0,He=0,Pe()(ze(t),{renderer:Be}));var t},at=function(e){return"object"===typeof e&&(e=e.join("\n\n")),"string"!=typeof(t=it(e))?"":(Xe=0,qe=0,Ze=0,Pe()(et(t),{renderer:$e}));var t},it=function(e){return e.split("\n").reduce(function(e,t){return["#","##","###"].map(function(e){t.substr(0,e.length)===e&&"#"!==t.charAt(e.length)&&(t=[t.slice(0,e.length)," ",t.slice(e.length)].join(""))}),e+t+"\n"},"")},ot=function(e){var t=0,n=0,a=0;return e.replace("\n\n","\n").split("\n").map(function(e){return e.trim()}).filter(function(e){return e.length>0}).reduce(function(e,i){return"###"===i.substring(0,3)?(a+=1,e+"    - [".concat(t,".").concat(n,".").concat(a,". ").concat(i.replace("###",""),"](#toc_").concat(t,"_").concat(n,"_").concat(a,")\n")):"##"===i.substring(0,2)?(a=0,n+=1,e+"  - [".concat(t,".").concat(n,". ").concat(i.replace("##",""),"](#toc_").concat(t,"_").concat(n,")\n")):"#"===i.substring(0,1)?(a=0,n=0,e+"- [".concat(t+=1,". ").concat(i.replace("#",""),"](#toc_").concat(t,")\n")):e},[])},rt=function(e,t,n){return"array"==typeof e&&(e=e.join("\n\n")),"\n<mjml>\n    <mj-head>\n        <mj-title>Indecsin Viikkotiedote ".concat(t.number," \u2014 Indecs' Newsletter ").concat(t.number,'</mj-title>\n        <mj-style inline="inline">\n        p       {{ font-size: 16px; margin: 10px 0px}}\n        h1      {{ font-size: 25px; font-weight:900; }}\n        h2      {{ font-size: 23px; font-weight:400}}\n        h3      {{ font-size: 21px; font-weight:400}}\n        tr th   {{ border-bottom:1px solid #ecedee;text-align:left }}\n        ul,ol   {{ margin: 10px 0px }}\n        ul ul, ol ol, ol ul, ul ol   {{ margin: 0px 0px }}\n\n        </mj-style>\n        <mj-font name="Source Sans Pro" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,200i,300,300i,400,400i,600,600i,700,700i,900,900i"></mj-font>\n        <mj-attributes>\n            <mj-body background-color="#eeeeee"></mj-body>\n            <mj-all font-family="Source Sans Pro, Helvetica, Arial, sans-serif"></mj-all>\n            <mj-text font-size="16px" font-weight="400" color="#2e3131" padding="0px 25px" line-height="24px"></mj-text>\n\n            <mj-class name="paragraph" padding="0px 25px"/>\n            <mj-class name="heading1"  padding-top="10px" padding-bottom="0px" padding-left="25px" padding-right="25px" color="#2e3131" text-transform="uppercase" />\n            <mj-class name="heading2" line-height="22px" padding-top="27px" padding-bottom="0px" padding-left="25px" padding-right="25px" color="#C01F29" />\n            <mj-class name="heading3"  padding-top="0px" padding-bottom="0px" padding-left="25px" padding-right="25px" color="#C01F29" />\n\n            <mj-button align="left" background-color="#C01F29" color="white" padding-bottom="25px" font-weight="900" inner-padding="10px 18px" text-transform="uppercase" />\n            <mj-table></mj-table>\n            <mj-divider padding-bottom="50px" padding-top="50px" border-width="2px" border-style="dashed" border-color="silver" /> \n            <mj-section background-color="white"></mj-section>\n            <mj-column></mj-column>\n            <mj-text></mj-text>\n\n            <mj-accordion border="none" padding="1px" />\n            <mj-accordion-element icon-wrapped-url="http://i.imgur.com/Xvw0vjq.png" icon-unwrapped-url="http://i.imgur.com/KKHenWa.png" icon-height="24px" icon-width="24px" />\n            <mj-accordion-title font-family="Roboto, Open Sans, Helvetica, Arial, sans-serif" background-color="#fff" color="#031017" padding="15px" font-size="18px" />\n            <mj-accordion-text font-family="Open Sans, Helvetica, Arial, sans-serif" background-color="#fafafa" padding="15px" color="#505050" font-size="14px" />\n\n      </mj-attributes>\n    </mj-head>\n    <mj-body>\n        <mj-section>\n            <mj-column>\n                <mj-image width="200px" padding-top="100px" src="https://indecs.fi/indecs-fi/wp-content/uploads/2019/01/Indecs_logo_teksti.png" /> \n                <mj-text font-size="22px" font-weight="300" padding-top="50px" padding-bottom="2px" color="black" align="center">').concat(t.guild,'</mj-text>\n                <mj-text font-size="40px" font-weight="900" font-style="italic" text-transform="uppercase" line-height="40px" padding-top="0px" padding-bottom="2px" color="#C01F29" align="center">Viikkotiedote</mj-text>\n                <mj-text font-size="22px" font-weight="700" padding-top="0px" text-transform="uppercase" padding-bottom="80px" color="#2e3131" align="center">Numero ').concat(t.number," \u2014 Viikko ").concat(n,"</mj-text>\n            </mj-column>\n        </mj-section>\n\n        <mj-section>\n            <mj-column>\n                ").concat(at(e),'\n            </mj-column>\n        </mj-section>\n\n        <mj-section>\n            <mj-column padding-bottom="120px">\n                <mj-divider padding-top="70px" padding-bottom="120px" border-width="2px" border-style="dashed" border-color="silver" /> \n                <mj-text font-size="20px" font-weight="300" padding-top="35px" padding-bottom="10px" color="black" align="center">Terveisin - Regards,</mj-text>\n                <mj-text font-size="35px" font-weight="800" text-transform="uppercase" font-style="italic" line-height="35px" padding-top="0px" padding-bottom="10px" color="#C01F29" align="center">').concat(t.name,'</mj-text>\n                <mj-text font-size="20px" font-weight="800" text-transform="uppercase" padding-top="0px" padding-bottom="10px" color="#2e3131" align="center">').concat(t.job," / ").concat(t.job_en,'</mj-text>\n                <mj-text font-size="16px" font-weight="300" color="#2e3131" align="center">\n                    ').concat(t.guild,"<br>\n                    ").concat(t.guild_en,"<br>\n                    ").concat(t.university,"<br>\n                    ").concat(t.university_en,"<br>\n                    ").concat(t.phone,'<br>\n                    <a href="mailto:').concat(t.email,'">').concat(t.email,'</a><br>\n                    <a href="').concat(t.url,'">').concat(t.url,"</a>\n                </mj-text>\n            </mj-column>\n        </mj-section>\n    </mj-body>\n</mjml>\n")},ct=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value;n.saveHistory(t),n.props.onChange(t)},n.insert=function(e){var t=Object(Oe.a)(Object(Oe.a)(n)).$vm,a=e.currentTarget?e.currentTarget.getAttribute("data-type"):e;Ne(t,a),n.props.onChange(t.value),n.saveHistory(t.value)},n.undo=function(){var e=n.state.f_history,t=n.state.f_history_index;if(!((t-=1)<0)){n.setState({f_history_index:t});var a=e[t];n.props.onChange(a),n.handleLineIndex(a)}},n.redo=function(){var e=n.state.f_history,t=n.state.f_history_index;if(!((t+=1)>=e.length)){n.setState({f_history_index:t});var a=e[t];n.props.onChange(a),n.handleLineIndex(a)}},n.preview=function(){n.setState({preview:!n.state.preview})},n.expand=function(){n.setState({expand:!n.state.expand})},n.save=function(){n.props.onSave()},n.$vm=null,n.handleEditorRef=function(e){n.$vm=e},n.state={preview:!(window.innerWidth<700),expand:!1,f_history:[],f_history_index:0,line_index:1,height:600,width:1e3},n.updateWindowDimensions=n.updateWindowDimensions.bind(Object(Oe.a)(Object(Oe.a)(n))),n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e;(e=this).$vm.addEventListener("keydown",function(t){if(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey){if((t.ctrlKey||t.metaKey)&&!t.altKey&&!t.shiftKey)switch(t.keyCode){case De:t.preventDefault(),e.undo();break;case We:t.preventDefault(),e.redo();break;case Me:t.preventDefault(),e.save();break;case Se:t.preventDefault(),e.insert("bold");break;case Le:t.preventDefault(),e.insert("italic")}}else switch(t.keyCode){case Re:t.preventDefault(),e.insert("tab")}}),this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUpdate",value:function(e,t){var n=this.state.f_history;e.value&&0===t.f_history.length&&(n.push(e.value),this.setState({f_history:n}),this.handleLineIndex(e.value))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"saveHistory",value:function(e){var t=this,n=this.state,a=n.f_history,i=n.f_history_index;window.clearTimeout(this.currentTimeout),this.currentTimeout=setTimeout(function(){i<a.length-1&&a.splice(i+1),a.length>=20&&a.shift(),i=a.length,a.push(e),t.setState({f_history:a,f_history_index:i})},500),this.handleLineIndex(e)}},{key:"handleLineIndex",value:function(e){var t=e?e.split("\n").length:1;this.setState({line_index:t})}},{key:"isMobile",value:function(){return this.state.width<700}},{key:"render",value:function(){var e=this.state,t=e.preview,n=e.expand,a=e.line_index,i=this.props.value,o=_e()({"for-panel":!0,"for-preview-hidden":!t}),r=_e()({"for-panel":!0,"for-editor-hidden":!!this.isMobile()&&t}),s=_e()({"for-active":t}),l=_e()({"for-container":!0,"for-fullscreen":n}),u=_e()({"for-active":n}),p=_e()({"for-line-num":!0,hidden:!this.props.lineNum});return c.a.createElement("div",{className:l,style:{height:this.state.expand?this.state.height:this.state.height-100}},c.a.createElement("div",{className:"for-controlbar",style:{display:this.isMobile()?"block":"flex"}},c.a.createElement("ul",null,c.a.createElement("li",{"data-type":"h1",onClick:this.insert,title:"Iso otsikko"},"H1"),c.a.createElement("li",{"data-type":"h2",onClick:this.insert,title:"Keskikokoinen otsikko"},"H2"),c.a.createElement("li",{"data-type":"h3",onClick:this.insert,title:"Pieni otsikko"},"H3"),c.a.createElement("li",{"data-type":"bold",onClick:this.insert,title:"Lihavoitu teksti (ctrl+b)"},c.a.createElement("i",{className:"fa fa-bold"})),c.a.createElement("li",{"data-type":"italic",onClick:this.insert,title:"Kursivoitu teksti (ctrl+i)"},c.a.createElement("i",{className:"fa fa-italic"})),c.a.createElement("li",{"data-type":"image",onClick:this.insert,title:"Kuva"},c.a.createElement("i",{className:"foricon for-image"})),c.a.createElement("li",{"data-type":"link",onClick:this.insert,title:"Linkki"},c.a.createElement("i",{className:"foricon for-link"})),c.a.createElement("li",{"data-type":"linkButton",onClick:this.insert,title:"Linkki painike"},c.a.createElement("i",{className:"fab fa-facebook-square"})),c.a.createElement("li",{"data-type":"table",onClick:this.insert,title:"Taulukko"},c.a.createElement("i",{className:"fa fa-table"}))),c.a.createElement("ul",null,c.a.createElement("li",{"data-type":"list",onClick:this.insert,title:"Lista"},c.a.createElement("i",{className:"fa fa-list"})),c.a.createElement("li",{"data-type":"listUl",onClick:this.insert,title:"T\xe4pl\xe4 lista"},c.a.createElement("i",{className:"fa fa-list-ul"})),c.a.createElement("li",{"data-type":"listOl",onClick:this.insert,title:"Numeroitu lista"},c.a.createElement("i",{className:"fa fa-list-ol"})),c.a.createElement("li",{"data-type":"code",onClick:this.save,title:"Tallenna (ctrl+s)"},c.a.createElement("i",{className:"foricon for-save"})),c.a.createElement("li",{className:u,onClick:this.expand},u?c.a.createElement("i",{className:"foricon for-contract"}):c.a.createElement("i",{className:"foricon for-expand"})),c.a.createElement("li",{className:s,onClick:this.preview},s?c.a.createElement("i",{className:"foricon for-eye-off"}):c.a.createElement("i",{className:"foricon for-eye"})),c.a.createElement("li",{onClick:this.undo,title:"Taaksep\xe4in (ctrl+z)"},c.a.createElement("i",{className:"foricon for-undo"})),c.a.createElement("li",{onClick:this.redo,title:"Eteenp\xe4in (ctrl+y)"},c.a.createElement("i",{className:"foricon for-redo"})))),c.a.createElement("div",{className:"for-editor"},c.a.createElement("div",{className:r},c.a.createElement("div",{className:"for-editor-wrapper"},c.a.createElement("div",{className:"for-editor-block"},function(){for(var e=[],t=0;t<a;t++)e.push(c.a.createElement("li",{key:t+1},t+1));return c.a.createElement("ul",{className:p},e)}(),c.a.createElement("div",{className:"for-editor-content"},c.a.createElement("pre",null,i," "),c.a.createElement("textarea",{ref:this.handleEditorRef,value:i,onChange:this.handleChange,placeholder:this.props.placeholder,spellCheck:"false",autoCapitalize:"off",autoCorrect:"off"}))))),c.a.createElement("div",{className:o},c.a.createElement("div",{className:"for-preview for-markdown-preview",dangerouslySetInnerHTML:{__html:nt(this.props.topValue+"\n\n"+i+"\n\n"+this.props.bottomValue)}}))))}}]),t}(c.a.Component);ct.defaultProps={placeholder:"",lineNum:!0,topValue:"",bottomValue:""};var st=ct,lt=n(281),ut=n(123),pt=n.n(ut),dt=be(function(e){return{socket:e.socket,rooms:e.app.rooms,id:e.config.articleId}},{getArticle:ye.app.getArticle,navigate:ye.config.navigate,updateArticle:ye.app.updateArticle})(function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).handleChange=function(e){n.props.socket.disconnected?n.reconnect():(n.setState({value:e}),n.props.socket.emit("set text",e))},n.props.getText(function(e){return n.setState({value:e})}),n.state={value:"",autoSave:!0,previousValue:""},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.initialize()}},{key:"initialize",value:function(){var e=this;this.props.getArticle(this.props.id).then(function(t){var n=t.action.payload.data;e.setState({value:n.text,previousValue:n.text}),e.props.socket.emit("join room",n),e.interval=setInterval(function(){e.isEdited()&&(e.setState({previousValue:e.state.value}),e.handleSave())},6e4)}).catch(function(t){e.props.navigate("HOME")})}},{key:"isEdited",value:function(){return this.state.value!==this.state.previousValue}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"reconnect",value:function(){var e=this;this.props.getArticle(this.props.id).then(function(t){var n=t.action.payload.data;e.setState({value:n.text,previousValue:n.text,disconnected:!1}),e.props.socket.emit("join room",n)}).catch(function(t){e.props.navigate("HOME")})}},{key:"handleSave",value:function(){this.props.updateArticle({id:this.props.id,text:this.state.value}).then(function(){return h.toast.success("Artikkeli tallennettu")}).catch(function(){return h.toast.error("Virhe tallennettaessa artikkelia")})}},{key:"socketsOnline",value:function(){var e=this.props.rooms;return(e[this.props.id]?e[this.props.id].sockets:[]).length>1}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{style:{height:"100%"}},this.isEdited()&&c.a.createElement(pt.a,{onBeforeunload:function(){return"Haluatko varmasti poistua? Viimeisempi\xe4 muutoksia ei ole tallennettu."}}),this.socketsOnline()&&c.a.createElement(lt.a,{color:"warning"},"Toinen k\xe4ytt\xe4j\xe4 on muokkaamassa tiedostoa!"),c.a.createElement("div",{style:ft},c.a.createElement(st,{value:this.state.value,onChange:this.handleChange,onSave:function(){return e.handleSave()}})))}}]),t}(r.Component)),ft={boxShadow:"#999 0 0 12px",borderRadius:"4px"},mt=n(282),ht=n(283),gt=be(function(e){return{year:e.config.year,week:e.config.week,articleId:e.config.articleId,screen:e.config.screen,articles:e.app.articles}},{navigate:ye.config.navigate})(function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.year,a=t.week,i=t.articleId,o=t.screen,r=t.articles,s=o===_&&r.find(function(e){return e.id===i}),l=s?"".concat(s.position,". ").concat(tt(s.title,s.title_en)):"Viikkotiedote";return c.a.createElement(mt.a,null,c.a.createElement(ht.a,{onClick:function(){return e.props.navigate("HOME")}},c.a.createElement("a",{href:"javascript:void(0)"},"Viikkis ",a,"/",n)),(o===_||o===T)&&c.a.createElement(ht.a,{active:!0}," ",l))}}]),t}(r.Component)),kt=n(292),Et=n(284),vt=n(285),yt=n(286),bt=n(287),xt=be(function(e){return{year:e.config.year,week:e.config.week,now:e.config.now,socket:e.socket,config:e.config.config,isAdmin:e.app.user.admin,summary:e.app.articles.sort(function(e,t){return e.position-t.position}).reduce(function(e,t){return e+"\n \n"+t.text},"")}},{getWeekArticles:ye.app.getWeekArticles,setPrevWeek:ye.config.setPrevWeek,setNextWeek:ye.config.setNextWeek})(function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).state={showModal:!1,password:"",recipient:n.props.config.recipient,sender:n.props.config.sender,attachments:[]},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.getWeekArticles({year:this.props.year,week:this.props.week})}},{key:"toggleModal",value:function(){this.setState({showModal:!this.state.showModal})}},{key:"createBlob",value:function(e,t){var n="".concat(this.props.year,"-").concat(this.props.week,"-viikkis.").concat(e),a=document.createElement("a"),i=new Blob([t],{type:"text/plain"});a.href=URL.createObjectURL(i),a.download=n,a.click()}},{key:"exportHtml",value:function(){var e=this,t=ot(this.props.summary);(function(e){return fetch("".concat("http://viikkis.herokuapp.com","/mjml2html"),{method:"POST",headers:{"Content-Type":"text/html"},body:e})})(rt([t,this.props.summary],this.props.config,this.props.week)).then(function(e){return e.json()}).then(function(t){return e.createBlob("html",t.html)}).catch(function(e){return h.toast.error("virhe")})}},{key:"sendEmail",value:function(){var e,t=ot(this.props.summary),n=rt([t,this.props.summary],this.props.config,this.props.week),a=this.state,i=a.sender,o=a.recipient,r=a.password,c=a.attachments;(function(e,t,n,a,i,o){var r=new FormData,c=JSON.stringify({mjml:e,sender:t,recipient:n,subject:i});return o.forEach(function(e,t){r.append(t,e)}),r.append("body",new Blob([c])),P.a.post("".concat("http://viikkis.herokuapp.com","/send_email"),r,{headers:{Authorization:a}})})(n,i,o,r,(e=this.props.config,"Indecsin Viikkotiedote ".concat(e.number," \u2014 Indecs' Newsletter ").concat(e.number)),c).then(function(e){200===e.status?h.toast.success("S\xe4hk\xf6posti l\xe4hetetty"):h.toast.error("Ongelma s\xe4hk\xf6postin l\xe4hetyksess\xe4")}).catch(function(e){return h.toast.error("Ongelma s\xe4hk\xf6postin l\xe4hetyksess\xe4")})}},{key:"exportMd",value:function(){var e,t,n=(e=this.props.config,t=this.props.week,"otsikon_ylle: ".concat(e.guild,"\notsikon_alle: Numero ").concat(e.number," \u2013 Viikko ").concat(t,"\nsposti_aihe: Indecsin Viikkotiedote ").concat(e.number," \u2014 Indecs' Newsletter ").concat(e.number,"\nurl: ").concat(e.url,"\nnimi: ").concat(e.name,"\ntitteli: ").concat(e.job," / ").concat(e.job_en,"\nkilta: ").concat(e.guild,"\nguild: ").concat(e.guild_en,"\nyliopisto: ").concat(e.university,"\nuniversity: ").concat(e.university_en,"\npuhelin: ").concat(e.phone,"\nsposti: ").concat(e.email,"\ninternet: ").concat(e.url,"\n")+"\n\n# Sis\xe4llysluettelo \u2013 Table of Contents\n\n[TOC]\n\n"+this.props.summary).replace(/\n/g,"\r\n");this.createBlob("md",n)}},{key:"exportMjml",value:function(){var e=ot(this.props.summary),t=rt([e,this.props.summary],this.props.config,this.props.week).replace(/\n/g,"\r\n");this.createBlob("txt",t)}},{key:"render",value:function(){var e,t=this,n=ot(this.props.summary),a=function(e,t,n){return'\n<font class="margin"></font>\n<font class="top-kilta">'.concat(n.guild,'</font>\n<font class="top-viikkotiedote">Viikkotiedote</font>\n<font class="top-numero">Numero ').concat(n.number," \u2013 Viikko ").concat(e,'</font>\n<font class="margin"></font>\n<font class="top-toc"> Sis\xe4llysluettelo \u2013 Table of contents</font>\n').concat(t,"\n")}(this.props.week,n,this.props.config),i=(e=this.props.config,'\n<font class="margin"></font>\n<font class="top-kilta">Terveisin \u2013 Regards</font>\n<font class="top-viikkotiedote">'.concat(e.name,'</font>\n<font class="top-numero">').concat(e.job," / ").concat(e.job_en,'</font>\n<font class="bottom-default">').concat(e.guild,'</font>\n<font class="bottom-default">').concat(e.guild_en,'</font>\n<font class="bottom-default">').concat(e.university,'</font>\n<font class="bottom-default">').concat(e.university_en,'</font>\n<font class="bottom-default">').concat(e.phone,'</font>\n<font class="bottom-default">').concat(e.email,'</font>\n<font class="bottom-default">[').concat(e.url,"](").concat(e.url,')</font>\n<font class="margin"></font>\n'));return c.a.createElement(c.a.Fragment,null,c.a.createElement(kt.a,{isOpen:this.state.showModal,toggle:function(){return t.toggleModal()}},c.a.createElement(Et.a,null,"Lataa tai l\xe4het\xe4 viikkis"),c.a.createElement(vt.a,null,c.a.createElement("h5",null,"L\xe4het\xe4 viikkis s\xe4hk\xf6postilla"),"Vastaanottajan s\xe4hk\xf6posti:",c.a.createElement(b.a,{name:"recipient",type:"email",value:this.state.recipient,onChange:function(e){return t.setState({recipient:e.target.value})}}),"Liitteet:",c.a.createElement(b.a,{type:"file",multiple:!0,name:"file",onChange:function(e){return t.setState({attachments:Array.from(e.target.files)})}}),c.a.createElement("hr",null),"L\xe4hett\xe4j\xe4n s\xe4hk\xf6posti:",c.a.createElement(b.a,{name:"sender",type:"email",value:this.state.sender,onChange:function(e){return t.setState({sender:e.target.value})}}),"L\xe4hett\xe4j\xe4n salasana:",c.a.createElement(b.a,{name:"email_password",type:"password",value:this.state.password,onChange:function(e){return t.setState({password:e.target.value})}}),c.a.createElement(x.a,{block:!0,className:"mt-2",color:"success",onClick:function(){return t.sendEmail()}},c.a.createElement("i",{className:"fa fa-envelope"})," L\xe4het\xe4")),c.a.createElement(yt.a,null,c.a.createElement(bt.a,null,c.a.createElement(x.a,{color:"info",onClick:function(){return t.exportMd()}},c.a.createElement("i",{className:"fa fa-download"})," MD"),c.a.createElement(x.a,{color:"primary",onClick:function(){return t.exportHtml()}},c.a.createElement("i",{className:"fa fa-download"})," HTML"),c.a.createElement(x.a,{color:"warning",onClick:function(){return t.exportMjml()}},c.a.createElement("i",{className:"fa fa-download"})," MJML")))),this.props.isAdmin&&c.a.createElement(x.a,{color:"success",block:!0,onClick:function(){return t.toggleModal()}},"Lataa tai l\xe4het\xe4 viikkis"),c.a.createElement("div",{style:{boxShadow:"#999 0 0 12px",borderRadius:"4px"}},c.a.createElement(st,{topValue:a,bottomValue:i,value:this.props.summary,onChange:function(){},onSave:function(){}})))}}]),t}(r.Component)),jt=n(288),wt=n(289),Ct=n(290),Ot=n(36),Tt=n(32),_t=be(function(e){return{year:e.config.year,week:e.config.week,number:e.config.config.number}},{createWeek:ye.app.createWeek,updateConfig:ye.config.updateConfig})(function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).state={articles:O.map(function(e,t){return{year:n.props.year,week:n.props.week,title:e.fi,title_en:e.en,text:"# ".concat(tt(e.fi,e.en)," \n\n"),text_en:""}})},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"createWeek",value:function(){var e=this;if(this.state.articles.find(function(e){return""===e.title.trim()}))h.toast.error("Kaikki suomenkieliset kent\xe4t ovat pakollisia!");else{var t=this.state.articles.map(function(t,n){return Object(M.a)({},t,{position:n+1,text:t.text||"# ".concat(tt(t.title,t.title_en)," \n\n"),year:e.props.year,week:e.props.week})}),n=this.props.number+1;this.props.week<6&&this.props.number>8&&(n=1),this.props.createWeek(t),this.props.updateConfig({number:n})}}},{key:"deleteTitle",value:function(e){this.setState({articles:this.state.articles.reduce(function(t,n,a){return a===e?t:Object(Tt.a)(t).concat([n])},[])})}},{key:"changeArticle",value:function(e,t){this.setState({articles:this.state.articles.map(function(n,a){return t===a?Object(M.a)({},n,Object(Ot.a)({},e.target.name,e.target.value)):n})})}},{key:"copyPrevWeek",value:function(){var e=Object(G.a)(R.a.mark(function e(){var t,n,a=this;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$({week:this.props.week-1,year:this.props.year});case 3:if(t=e.sent,0!==(n=t.data).length){e.next=7;break}throw new Error("Ei viime viikon tuloksia");case 7:this.setState({articles:n.sort(function(e,t){return e.position-t.position}).map(function(e){return{title:e.title,title_en:e.title_en,text:e.text,text_en:e.text_en,year:a.props.year,week:a.props.week,position:e.position}})}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),h.toast.error("Virhe ladatessa viime viikkoa");case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"addTitle",value:function(){this.setState({articles:Object(Tt.a)(this.state.articles).concat([{fi:"",en:""}])})}},{key:"render",value:function(){var e=this,t=this.state.articles;return c.a.createElement("div",{style:{backgroundColor:"white",padding:20}},c.a.createElement(x.a,{color:"warning",block:!0,onClick:function(){return e.copyPrevWeek()}},"Kopioi viime viikko"),c.a.createElement(k.a,null,t.map(function(t,n){return c.a.createElement("div",{style:At.box},c.a.createElement(x.a,{style:At.button,color:"danger",onClick:function(){return e.deleteTitle(n)}},"X"),c.a.createElement(v.a,{key:n,row:!0},c.a.createElement("div",{style:At.index},c.a.createElement("h2",null,n+1,".")),c.a.createElement(y.a,{for:"fi",sm:2},"Otsikko (fi)"),c.a.createElement(E.a,{sm:10},c.a.createElement(b.a,{type:"text",name:"title",required:!0,placeholder:"Otsikko suomeksi (pakollinen)",value:t.title,onChange:function(t){return e.changeArticle(t,n)}})),c.a.createElement(y.a,{for:"en",sm:2},"Otsikko (en)"),c.a.createElement(E.a,{sm:10},c.a.createElement(b.a,{type:"text",name:"title_en",placeholder:"Otsikko englanniksi (ei pakollinen)",value:t.title_en,onChange:function(t){return e.changeArticle(t,n)}}))),c.a.createElement(b.a,{style:{height:200},type:"textarea",name:"text",placeholder:"Teksti",value:t.text,onChange:function(t){return e.changeArticle(t,n)}}))}),c.a.createElement(x.a,{color:"info",block:!0,onClick:function(){return e.addTitle()}},"Lis\xe4\xe4 uusi otsikko"),c.a.createElement(x.a,{color:"success",size:"lg",block:!0,onClick:function(){return e.createWeek()}},"Luo viikkis!")))}}]),t}(r.Component)),At={box:{position:"relative",marginTop:10,backgroundColor:"rgba(0,0,0,0.07)",borderRadius:3,boxShadow:"#999 0 0 7px",border:"1px solid darkgray",padding:"60px 10px 10px 10px"},button:{position:"absolute",top:0,right:0,zIndex:999},index:{position:"absolute",top:5,left:5,zIndex:999}},It=be(function(e){return{articles:e.app.articles.sort(function(e,t){return e.position-t.position}),socket:e.socket,rooms:e.app.rooms,year:e.config.year,week:e.config.week,isAdmin:e.app.user.admin}},{deleteArticle:ye.app.deleteArticle,setConfigState:ye.config.setConfigState,navigate:ye.config.navigate})(function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"socketsOnline",value:function(e){var t=this.props.rooms;return(t[e]?t[e].sockets:[]).length>0}},{key:"deleteArticle",value:function(e){window.confirm("Haluatko varmasti poistaa artikkelin?")&&this.props.deleteArticle(e)}},{key:"render",value:function(){var e=this,t=this.props.articles;return 0===t.length?this.props.isAdmin?c.a.createElement(_t,null):c.a.createElement(function(){return c.a.createElement("div",{style:{textAlign:"center",paddingTop:20,paddingBottom:20}},c.a.createElement("i",{className:"fa fa-database",style:{fontSize:60}}),c.a.createElement("h2",null,"Ei artikkeleja"),c.a.createElement("h5",null,"Sihteeri ei ole viel\xe4 luonut t\xe4m\xe4n viikon artikkeleja"))},null):c.a.createElement(c.a.Fragment,null,c.a.createElement(x.a,{block:!0,color:"success",onClick:function(){return e.props.navigate("SUMMARY")}},"N\xe4yt\xe4 kooste viikkotiedotteesta"),c.a.createElement(jt.a,{flush:!0},t.map(function(t){return c.a.createElement(wt.a,{key:t.id},c.a.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.props.setConfigState({articleId:t.id,screen:"ARTICLE"})}},t.position,". ",tt(t.title,t.title_en)),c.a.createElement("br",null),c.a.createElement(Ct.a,{color:"success"},t.text.length," merkki\xe4")," "," ",c.a.createElement(Ct.a,{color:"warning"},function(e){var t={prefix:"",suffix:" sitten",seconds:"alle minuutti",minute:"noin minuutti",minutes:"%d minuuttia",hour:"noin tunti",hours:"noin %d tuntia",day:"p\xe4iv\xe4",days:"%d p\xe4iv\xe4\xe4",month:"noin kuukausi",months:"%d kuukautta",year:"noin vuosi",years:"%d vuotta"},n=e,a=function(e,n){return t[e]&&t[e].replace(/%d/i,Math.abs(Math.round(n)))};if("0000-00-00 00:00:00"===n)return"Ei muokattu";n=(n=(n=(n=n.replace(/\.\d+/,"")).replace(/-/,"/").replace(/-/,"/")).replace(/T/," ").replace(/Z/," UTC")).replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),n=new Date(1e3*n||n);var i=.001*((new Date).getTime()-n)>>0,o=i/60,r=o/60,c=r/24,s=c/365;return"muokattu "+t.prefix+(i<45&&a("seconds",i)||i<90&&a("minute",1)||o<45&&a("minutes",o)||o<90&&a("hour",1)||r<24&&a("hours",r)||r<42&&a("day",1)||c<30&&a("days",c)||c<45&&a("month",1)||c<365&&a("months",c/30)||s<1.5&&a("year",1)||a("years",s))+t.suffix}(t.edited_at))," "," ",e.socketsOnline(t.id)&&c.a.createElement(Ct.a,{color:"info"},"joku muokkaamassa"),e.props.isAdmin&&c.a.createElement(x.a,{color:"danger",outline:!0,size:"sm",style:{float:"right"},onClick:function(){return e.deleteArticle(t.id)}},"X"))})))}}]),t}(r.Component)),Nt=be(function(e){return{year:e.config.year,week:e.config.week,now:e.config.now,socket:e.socket}},{getWeekArticles:ye.app.getWeekArticles,setPrevWeek:ye.config.setPrevWeek,setNextWeek:ye.config.setNextWeek,getConfig:ye.config.getConfig})(function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).state={failed:!0,loaded:!1},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.init(),this.props.socket.emit("leave room")}},{key:"init",value:function(){var e=Object(G.a)(R.a.mark(function e(){return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.getWeekArticles({year:this.props.year,week:this.props.week});case 3:this.props.getConfig(),this.setState({failed:!1,loaded:!0}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),h.toast.error("Ei internet yhteytt\xe4 palvelimeen"),this.setState({failed:!0,loaded:!0});case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=(t.year,t.week),a=t.now,i=ce()(a).startOf("isoWeek"),o=ce()(a).endOf("isoWeek"),r=this.state,s=r.loaded,l=r.failed;return c.a.createElement("div",{style:St.wrapper},c.a.createElement("div",{style:St.container},c.a.createElement(x.a,{onClick:function(){return e.props.setPrevWeek()},style:St.left,color:"link"},c.a.createElement("h1",null,c.a.createElement("i",{className:"fa fa-angle-left"}))),c.a.createElement("div",{style:St.center},c.a.createElement("h1",null,"Viikko ",n),c.a.createElement("h3",null,i.format("DD.MM.YYYY")," -"," ",o.format("DD.MM.YYYY"))),c.a.createElement(x.a,{onClick:function(){return e.props.setNextWeek()},style:St.right,color:"link"},c.a.createElement("h1",null,c.a.createElement("i",{className:"fa fa-angle-right"})))),s&&!l&&c.a.createElement(It,null))}}]),t}(r.Component)),St={wrapper:{backgroundColor:"white",boxShadow:"#999 0 0 12px",borderRadius:"4px"},container:{flex:1,flexDirection:"row",display:"flex"},left:{flex:.1,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:0},center:{flex:.8,flexDirection:"column",display:"flex",alignItems:"center",justifyContent:"center"},right:{flex:.1,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"}},Lt=n(291),Mt=be(function(e){return{config:e.config.config}},{updateConfig:ye.config.updateConfig})(function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(i)))).state=n.props.config,n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"changeConfig",value:function(e){this.setState(Object(Ot.a)({},e.target.name,e.target.value))}},{key:"updateConfig",value:function(){this.props.updateConfig(this.state).then(function(){return h.toast.success("Asetukset p\xe4ivitetty")}).catch(function(e){return h.toast.error("Virhe asetuksien p\xe4ivityksess\xe4")})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{style:Dt.box},c.a.createElement("h1",null,"Sihteerin asetukset"),c.a.createElement(Lt.a,null,Object.entries(this.state).filter(function(e){return"id"!==e[0]}).map(function(t){var n=Object(Ge.a)(t,2),a=n[0],i=n[1];return c.a.createElement(E.a,{xs:"6",sm:"4"},a,":",c.a.createElement(b.a,{type:"text",name:a,placeholder:a,value:i,onChange:function(t){return e.changeConfig(t)}}))})),c.a.createElement(x.a,{color:"success",size:"lg",block:!0,onClick:function(){return e.updateConfig()}},"Tallenna asetukset"))}}]),t}(c.a.Component)),Dt={box:{position:"relative",marginTop:10,backgroundColor:"white",borderRadius:3,boxShadow:"#999 0 0 7px",border:"1px solid darkgray",padding:"60px 10px 10px 10px"}},Wt=be(function(e){return{screen:e.config.screen}})(function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"navigation",value:function(){switch(this.props.screen){case T:return c.a.createElement(xt,null);case _:return c.a.createElement(dt,{getText:this.props.getText});case A:return c.a.createElement(Mt,null);default:return c.a.createElement(Nt,null)}}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(xe,null),c.a.createElement(gt,null),c.a.createElement(g.a,{style:{marginBottom:20}},this.navigation()))}}]),t}(c.a.Component)),Rt=n(124),Gt=n.n(Rt),Ft=function(){return c.a.createElement("div",{style:Pt.loader},c.a.createElement("div",{style:Pt.container},c.a.createElement("h1",{style:Pt.text},"Ladataan..."),c.a.createElement(Gt.a,{type:"Puff",color:"#00BFFF",height:"100",width:"100"})))},Pt={loader:{zIndex:1e4,position:"fixed",top:0,left:0,bottom:0,right:0,backgroundColor:"transparent",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"white"},container:{backgroundColor:"rgba(0,0,0,0.5)",padding:40,display:"flex",justifyContent:"center",alignItems:"center"},text:{color:"white"}},Vt=be(function(e){return{loading:e.app.loading,socket:e.socket,logged:e.app.logged}},{login:ye.app.login,setState:ye.app.setState})(function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).props.socket.on("get rooms",function(e){return n.props.setState({rooms:e})}),n.props.socket.on("get sockets",function(e){return n.props.setState({sockets:e})}),n.getText=function(e){return n.props.socket.on("get text",e)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("email"),t=localStorage.getItem("password");e&&t&&this.props.login({email:e,password:t}).catch(function(){localStorage.removeItem("email"),localStorage.removeItem("password")})}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(h.ToastContainer,{style:{zIndex:1e5},position:"bottom-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!1}),this.props.loading&&c.a.createElement(Ft,null),this.props.logged?c.a.createElement(Wt,{getText:this.getText}):c.a.createElement(we,null))}}]),t}(r.Component)),Kt=n(125),zt={loading:!1,articles:[],config:{year:null,week:null,number:null,guild:null,guild_en:null,subject:null,url:null,name:null,job:null,job_en:null,university:null,university_en:null,phone:null,email:null},rooms:{},logged:!1,user:{admin:!1,email:""},sockets:[]},Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case X.SET_STATE.NAME:return Object(M.a)({},e,n);case X.GET_ARTICLES.PENDING:case X.CREATE_WEEK.PENDING:case X.GET_ARTICLE.PENDING:case X.DELETE_ARTICLE.PENDING:case X.GET_WEEK_ARTICLES.PENDING:case X.GET_WEEK_CONFIG.PENDING:case X.LOGIN.PENDING:return Object(M.a)({},e,{loading:!0});case X.GET_ARTICLES.REJECTED:case X.CREATE_WEEK.REJECTED:case X.DELETE_ARTICLE.REJECTED:case X.GET_ARTICLE.REJECTED:case X.GET_WEEK_ARTICLES.REJECTED:case X.GET_WEEK_CONFIG.REJECTED:return h.toast.error("Ei internet yhteytt\xe4 palvelimeen"),Object(M.a)({},e,{loading:!1});case X.GET_ARTICLES.FULFILLED:return Object(M.a)({},e,{loading:!1,articles:n.data});case X.LOGIN.REJECTED:return Object(M.a)({},e,{loading:!1});case X.CREATE_WEEK.FULFILLED:return Object(M.a)({},e,{articles:Object(Tt.a)(e.articles).concat(Object(Tt.a)(n)),loading:!1});case X.GET_ARTICLE.FULFILLED:return Object(M.a)({},e,{articles:e.articles.map(function(e){return e.id===n.id?n:e}),loading:!1});case X.DELETE_ARTICLE.FULFILLED:return Object(M.a)({},e,{articles:e.articles.reduce(function(e,t){return t.id===n.data?e:Object(Tt.a)(e).concat([t])},[]),loading:!1});case X.GET_WEEK_ARTICLES.FULFILLED:return Object(M.a)({},e,{articles:n.data,loading:!1});case X.GET_WEEK_CONFIG.FULFILLED:return Object(M.a)({},e,{config:n.data.length>0?n.data[0]:zt.config,loading:!1});case X.LOGIN.FULFILLED:return Object(M.a)({},e,{user:n.data,logged:!0,loading:!1});case X.LOGOUT.NAME:return Object(M.a)({},e,{user:zt.user,logged:!1});default:return e}},Yt=n(126),Ht=n.n(Yt),Bt={loading:!1,year:parseInt(ce()().format("YYYY")),week:parseInt(ce()().format("WW")),now:ce()().day("Wednesday").year(ce()().format("YYYY")).week(ce()().format("WW")),screen:null,articleId:null,config:{email:"",guild:"",guild_en:"",id:"",job:"",job_en:"",name:"",phone:"",university:"",university_en:"",url:"",sender:"",recipient:"",number:0}},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt,t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case se.SET_CONFIG_STATE.NAME:return Object(M.a)({},e,n);case se.NAVIGATE.NAME:return Object(M.a)({},e,{screen:n});case se.NAVIGATE_HOME.NAME:return Bt;case se.GET_CONFIG.FULFILLED:return Object(M.a)({},e,{config:n.data});default:return e}},$t=Ht()("http://viikkis.herokuapp.com"),Xt=Object(Ee.c)({app:Ut,config:Jt,socket:function(){return $t}}),qt=n(128),Zt=n(127),Qt=Object(Zt.createLogger)({predicate:function(e,t){return!0}}),en=Object(Ee.a)(Object(qt.a)(),Kt.a,Qt),tn=Object(Ee.d)(Xt,en);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(265),n(267),n(269);l.a.render(c.a.createElement(ve.a,{store:tn},c.a.createElement(Vt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[129,2,1]]]);
//# sourceMappingURL=main.cdf36481.chunk.js.map