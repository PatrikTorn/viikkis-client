{"version":3,"sources":["images/viikkis.png","constants.js","tools/actionTools.js","tools/httpTools.js","services/httpService.js","actions/appActions.js","actions/configActions.js","actions/localeActions.js","actions/index.js","containers/Header.js","containers/Login.js","editor/helpers/insertText.js","editor/helpers/keydownListen.js","editor/helpers/highlight.js","editor/helpers/md2html.js","editor/helpers/md2mjml.js","tools/articleTools.js","editor/index.js","containers/Article.js","containers/NavBar.js","containers/Summary.js","containers/CreateWeek.js","containers/WeekList.js","containers/WeekContainer.js","containers/ConfigSettings.js","containers/Navigator.js","components/LoadingComponent.js","containers/ScreenContainer.js","reducers/appReducer.js","reducers/configReducer.js","reducers/index.js","store.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","API_ENDPOINT","TITLES","fi","en","SCREENS","createActionPointers","types","arguments","length","undefined","list","map","type","NAME","PENDING","concat","FULFILLED","REJECTED","Method","request","method","url","data","config","payload","axios","get","post","put","delete","patch","head","headers","content-type","getWeekArticles","_ref","year","week","setState","SET_STATE","getArticles","GET_ARTICLES","GET_WEEK_ARTICLES","httpService","getArticle","id","GET_ARTICLE","deleteArticle","DELETE_ARTICLE","updateArticle","_ref2","text","UPDATE_ARTICLE","_ref3","JSON","stringify","createWeek","articles","CREATE_WEEK","all","_ref4","Object","asyncToGenerator","regenerator_default","a","mark","_callee","res","wrap","_context","prev","next","sent","abrupt","objectSpread","edited_at","created_at","Date","toISOString","stop","this","_x","apply","login","email","password","LOGIN","logout","LOGOUT","setConfigState","SET_CONFIG_STATE","navigate","screen","NAVIGATE","getConfig","GET_CONFIG","updateConfig","newConfig","UPDATE_CONFIG","navigateHome","dispatch","NAVIGATE_HOME","setNextWeek","getState","newDate","moment","now","add","parseInt","format","setPrevWeek","subtract","setLocale","lang","SET_LOCALE","actions","app","appActions","configActions","locale","localeActions","connector","state","acts","connect","bindActionCreators","user","logged","socketsLength","sockets","isAdmin","admin","dropdownOpen","localStorage","removeItem","props","_this2","react_default","createElement","style","styles","top","left","src","headerImage","alt","height","right","ButtonDropdown","isOpen","toggle","direction","DropdownToggle","className","fontSize","color","DropdownMenu","DropdownItem","header","divider","disabled","marginRight","onClick","Component","backgroundColor","width","display","flexDirection","flex","justifyContent","alignItems","cursor","users","position","paddingRight","rememberMe","then","setItem","catch","toast","error","_this3","containers_Header","wrapper","Container","container","Form","Col","FormGroup","Label","Input","name","placeholder","value","onChange","e","target","for","check","Button","boxShadow","borderRadius","padding","margin","bottom","insert","$vm","prefix","hint","subfix","selectionStart","start","end","selectionEnd","restoreTop","scrollTop","substring","focus","toolbar","h1","h2","h3","bold","italic","image","link","linkButton","code","listUl","listOl","table","tab","insertText","KEY_CODE","Hljs","require","registerLanguage","marked","setOptions","renderer","Renderer","gfm","tables","breaks","pedantic","sanitize","smartLists","smartypants","highlight","highlightAuto","replace","content","replacementArray","results","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","slicedToArray","regex","replacement","err","return","massReplace","buttonParse","_1","_2","_3","href","paragraph","title","heading","level","raw","escape","body","tablerow","tablecell","flags","tag","align","ordered","listitem","formatTitle","mdToHtml","md","join","headingCaps","mdToMjml","split","reduce","acc","str","i","substr","charAt","slice","createMarkdownTOC","trim","filter","createMjml","number","guild","job","job_en","guild_en","university","university_en","phone","MdEditor","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleChange","saveHistory","assertThisInitialized","currentTarget","getAttribute","textInsert","undo","f_history","f_history_index","handleLineIndex","redo","preview","expand","save","onSave","handleEditorRef","window","innerWidth","line_index","updateWindowDimensions","bind","ins","addEventListener","ctrlKey","metaKey","altKey","shiftKey","keyCode","preventDefault","push","removeEventListener","innerHeight","_this$state","clearTimeout","currentTimeout","setTimeout","splice","shift","_this$state2","previewClass","classNames","for-panel","for-preview-hidden","editorClass","for-editor-hidden","isMobile","previewActive","for-active","fullscreen","for-container","for-fullscreen","expandActive","lineNumStyles","for-line-num","hidden","lineNum","data-type","key","ref","spellCheck","autoCapitalize","autoCorrect","dangerouslySetInnerHTML","__html","topValue","bottomValue","React","defaultProps","socket","rooms","articleId","Main","disconnected","reconnect","emit","getText","autoSave","previousValue","initialize","action","interval","setInterval","isEdited","handleSave","clearInterval","success","_this4","Beforeunload_default","onBeforeunload","socketsOnline","Alert","editorStyle","src_editor","_this$props","article","find","title_en","Breadcrumb","BreadcrumbItem","active","summary","sort","b","showModal","recipient","sender","attachments","fileName","element","document","file","Blob","URL","createObjectURL","download","click","tableOfContents","mjml","fetch","Content-Type","mjml2html","json","createBlob","html","subject","formData","FormData","forEach","append","Authorization","sendEmail","status","SUMMARY_TOP","Fragment","Modal","toggleModal","ModalHeader","ModalBody","multiple","Array","from","files","block","ModalFooter","ButtonGroup","exportMd","exportHtml","exportMjml","text_en","nextNumber","obj","ind","toConsumableArray","index","defineProperty","response","Error","copyPrevWeek","box","button","deleteTitle","row","sm","required","changeArticle","addTitle","size","marginTop","border","zIndex","confirm","containers_CreateWeek","textAlign","paddingTop","paddingBottom","ListGroup","flush","ListGroupItem","Badge","editedAt","templates","suffix","seconds","minute","minutes","hour","hours","day","days","month","months","years","time","template","t","n","Math","abs","round","getTime","lastEdited","outline","float","failed","loaded","init","startOfWeek","startOf","endOfWeek","endOf","center","containers_WeekList","Row","entries","xs","changeConfig","containers_Summary","Article","containers_ConfigSettings","containers_WeekContainer","NavBar","marginBottom","navigation","LoadingComponent","loader","react_loader_spinner_default","loading","ScreenContainer","on","cb","getItem","lib","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnVisibilityChange","draggable","pauseOnHover","LoadingComponent_LoadingComponent","Navigator","containers_Login","initialState","appReducer","GET_WEEK_CONFIG","configReducer","socketReducer","io","rootReducer","combineReducers","loggerMiddleWare","createLogger","predicate","middleWares","applyMiddleware","promise","thunk","createStore","reducers","Boolean","location","hostname","match","ReactDOM","render","es","store","containers_ScreenContainer","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.cdf36481.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/viikkis.86ac6c38.png\";","export const API_ENDPOINT = \"http://viikkis.indecs.fi/api.php\";\r\nexport const AUTH_ENDPOINT = \"http://viikkis.indecs.fi/login.php\";\r\nexport const SOCKET_ENDPOINT = \"http://viikkis.herokuapp.com\";\r\n// export const SOCKET_ENDPOINT = \"http://localhost:5000\";\r\n\r\nexport const TITLES = [\r\n  {\r\n    fi: \"Yleistä\",\r\n    en: \"General\"\r\n  },\r\n  {\r\n    fi: \"Indecsin tapahtumat\",\r\n    en: \"Indecs events\"\r\n  },\r\n  {\r\n    fi: \"TREY tiedottaa\",\r\n    en: \"Student Union announces\"\r\n  },\r\n  {\r\n    fi: \"Tampereen Teekkarit tiedottaa\",\r\n    en: \"Teekkari Union of Tampere announces\"\r\n  },\r\n  {\r\n    fi: \"Yritystiimi tiedottaa\",\r\n    en: \"Corporate Relations Team announces\"\r\n  },\r\n  {\r\n    fi: \"Tulevat tapahtumat\",\r\n    en: \"Upcoming events\"\r\n  },\r\n  {\r\n    fi: \"ESTIEM asiaa\",\r\n    en: \"ESTIEM affairs\"\r\n  },\r\n  {\r\n    fi: \"Loppukevennys\",\r\n    en: \"\"\r\n  }\r\n];\r\n\r\nexport const SCREENS = {\r\n  SUMMARY: \"SUMMARY\",\r\n  ARTICLE: \"ARTICLE\",\r\n  CONFIG_SETTINGS: \"CONFIG_SETTINGS\"\r\n};\r\n\r\nexport const EMAIL_SUBJECT = (config) => `Indecsin Viikkotiedote ${config.number} — Indecs' Newsletter ${config.number}`;\r\n\r\nexport const MD_CONFIG = (config, week) =>\r\n  `otsikon_ylle: ${config.guild}\r\notsikon_alle: Numero ${config.number} – Viikko ${week}\r\nsposti_aihe: Indecsin Viikkotiedote ${config.number} — Indecs' Newsletter ${config.number}\r\nurl: ${config.url}\r\nnimi: ${config.name}\r\ntitteli: ${config.job} / ${config.job_en}\r\nkilta: ${config.guild}\r\nguild: ${config.guild_en}\r\nyliopisto: ${config.university}\r\nuniversity: ${config.university_en}\r\npuhelin: ${config.phone}\r\nsposti: ${config.email}\r\ninternet: ${config.url}\r\n`;\r\n\r\nexport const MD_CONFIG_TOC = `\r\n\r\n# Sisällysluettelo – Table of Contents\r\n\r\n[TOC]\r\n\r\n`;\r\n\r\nexport const SUMMARY_TOP = (week, tableOfContents, config) => `\r\n<font class=\"margin\"></font>\r\n<font class=\"top-kilta\">${config.guild}</font>\r\n<font class=\"top-viikkotiedote\">Viikkotiedote</font>\r\n<font class=\"top-numero\">Numero ${config.number} – Viikko ${week}</font>\r\n<font class=\"margin\"></font>\r\n<font class=\"top-toc\"> Sisällysluettelo – Table of contents</font>\r\n${tableOfContents}\r\n`;\r\n\r\nexport const SUMMARY_BOTTOM = config => `\r\n<font class=\"margin\"></font>\r\n<font class=\"top-kilta\">Terveisin – Regards</font>\r\n<font class=\"top-viikkotiedote\">${config.name}</font>\r\n<font class=\"top-numero\">${config.job} / ${config.job_en}</font>\r\n<font class=\"bottom-default\">${config.guild}</font>\r\n<font class=\"bottom-default\">${config.guild_en}</font>\r\n<font class=\"bottom-default\">${config.university}</font>\r\n<font class=\"bottom-default\">${config.university_en}</font>\r\n<font class=\"bottom-default\">${config.phone}</font>\r\n<font class=\"bottom-default\">${config.email}</font>\r\n<font class=\"bottom-default\">[${config.url}](${config.url})</font>\r\n<font class=\"margin\"></font>\r\n`;\r\n","export const createActionPointers = (types = []) => {\r\n\tlet list = {};\r\n\ttypes.map(type => {\r\n\t\treturn list[type] = {\r\n\t\t\tNAME: type,\r\n\t\t\tPENDING: `${type}_PENDING`,\r\n\t\t\tFULFILLED: `${type}_FULFILLED`,\r\n\t\t\tREJECTED: `${type}_REJECTED`,\r\n\t\t}\r\n\t});\r\n\treturn list;\r\n};","import axios from \"axios\"\r\n\r\nexport const Method = {\r\n\tGET: \"GET\",\r\n\tPOST: \"POST\",\r\n\tPUT: \"PUT\",\r\n\tDELETE: \"DELETE\",\r\n\tPATCH: \"PATCH\",\r\n\tHEAD: \"HEAD\",\r\n    MULTIPARTPOST: \"MULTIPARTPOST\",\r\n    ALL: \"ALL\"\r\n};\r\n\r\nexport const request = (method, url, data, config) => {\r\n\tlet payload;\r\n\r\n\tswitch(method) {\r\n\t\tcase Method.GET:\r\n\t\t\tpayload = axios.get(url, config);\r\n\t\t\tbreak;\r\n\t\tcase Method.POST:\r\n\t\t\tpayload = axios.post(url, data, config);\r\n\t\t\tbreak;\r\n\t\tcase Method.PUT:\r\n\t\t\tpayload = axios.put(url, data, config);\r\n\t\t\tbreak;\r\n\t\tcase Method.DELETE:\r\n\t\t\tpayload = axios.delete(url, config);\r\n\t\t\tbreak;\r\n\t\tcase Method.PATCH:\r\n\t\t\tpayload = axios.patch(url, data, config);\r\n\t\t\tbreak;\r\n\t\tcase Method.HEAD:\r\n\t\t\tpayload = axios.head(url, config);\r\n            break;\r\n\t\tcase Method.MULTIPARTPOST:\r\n\t\t\tconfig.headers = {'content-type': 'multipart/form-data'};\r\n\t\t\tpayload = axios.post(url, data, config);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tpayload = data;\r\n\t\t\tbreak;\r\n\t}\r\n\treturn payload;\r\n};\r\n","import { Method, request } from \"../tools/httpTools\";\r\nimport { API_ENDPOINT, SOCKET_ENDPOINT, AUTH_ENDPOINT } from \"../constants\";\r\nimport axios from \"axios\";\r\n\r\nexport const getArticles = () =>\r\n  request(Method.GET, `${API_ENDPOINT}/articles`);\r\n\r\nexport const getWeekArticles = ({ year, week }) =>\r\n  request(Method.GET, `${API_ENDPOINT}/articles?year=${year}&week=${week}`);\r\n\r\nexport const getArticle = id =>\r\n  request(Method.GET, `${API_ENDPOINT}/articles/${id}`);\r\n\r\nexport const deleteArticle = id =>\r\n  request(Method.DELETE, `${API_ENDPOINT}/articles/${id}`);\r\n\r\nexport const login = ({ email, password }) =>\r\n  request(Method.POST, `${AUTH_ENDPOINT}`, JSON.stringify({ email, password }));\r\n\r\nexport const updateArticle = ({ id, text }) =>\r\n  request(\r\n    Method.PUT,\r\n    `${API_ENDPOINT}/articles/${id}`,\r\n    JSON.stringify({ text })\r\n  );\r\n\r\nexport const createWeek = config =>\r\n  axios.post(`${API_ENDPOINT}/weeks`, JSON.stringify(config));\r\n\r\nexport const getConfig = () => axios.get(`${API_ENDPOINT}/config/1`);\r\n\r\nexport const updateConfig = config =>\r\n  axios.put(`${API_ENDPOINT}/config/1`, JSON.stringify(config));\r\n\r\nexport const createArticles = articles =>\r\n  axios.all(\r\n    articles.map(async a => {\r\n      const res = await axios.post(\r\n        `${API_ENDPOINT}/articles`,\r\n        JSON.stringify(a)\r\n      );\r\n      return {\r\n        ...a,\r\n        id: res.data,\r\n        edited_at: \"0000-00-00 00:00:00\",\r\n        created_at: new Date().toISOString()\r\n      };\r\n    })\r\n  );\r\n\r\nexport const mjml2html = mjml =>\r\n  fetch(`${SOCKET_ENDPOINT}/mjml2html`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"text/html\" },\r\n    body: mjml\r\n  });\r\n\r\nexport const sendEmail = (mjml, sender, recipient, password, subject, attachments) => {\r\n  const formData = new FormData()\r\n  const json = JSON.stringify({mjml, sender, recipient, subject});\r\n  attachments.forEach((file, i) => {\r\n    formData.append(i, file)\r\n  })\r\n  formData.append(\"body\", new Blob([json]));\r\n  return axios.post(`${SOCKET_ENDPOINT}/send_email`, formData, {headers:{Authorization:password}})\r\n \r\n}","import { createActionPointers } from \"../tools/actionTools\";\r\nimport * as httpService from \"../services/httpService\";\r\nexport const types = createActionPointers([\r\n  `SET_STATE`,\r\n  \"GET_ARTICLES\",\r\n  \"UPDATE_ARTICLE\",\r\n  \"CREATE_WEEK\",\r\n  \"GET_ARTICLE\",\r\n  \"DELETE_ARTICLE\",\r\n  \"LOGIN\",\r\n  \"LOGOUT\",\r\n  \"GET_TEXT\",\r\n  \"GET_WEEK_ARTICLES\",\r\n  \"GET_WEEK_CONFIG\"\r\n]);\r\n\r\nexport const setState = payload => ({\r\n  type: types.SET_STATE.NAME,\r\n  payload\r\n});\r\n\r\nexport const getArticles = () => ({\r\n  type: types.GET_ARTICLES.NAME,\r\n  payload: httpService.getArticles()\r\n});\r\n\r\nexport const getWeekArticles = ({ year, week }) => ({\r\n  type: types.GET_WEEK_ARTICLES.NAME,\r\n  payload: httpService.getWeekArticles({ year, week })\r\n});\r\n\r\nexport const getArticle = id => ({\r\n  type: types.GET_ARTICLE.NAME,\r\n  payload: httpService.getArticle(id)\r\n});\r\n\r\nexport const deleteArticle = id => ({\r\n  type: types.DELETE_ARTICLE.NAME,\r\n  payload: httpService.deleteArticle(id)\r\n});\r\n\r\nexport const updateArticle = ({ id, text }) => ({\r\n  type: types.UPDATE_ARTICLE.NAME,\r\n  payload: httpService.updateArticle({ id, text })\r\n});\r\n\r\nexport const createWeek = articles => ({\r\n  type: types.CREATE_WEEK.NAME,\r\n  payload: httpService.createArticles(articles)\r\n});\r\n\r\nexport const login = ({ email, password }) => ({\r\n  type: types.LOGIN.NAME,\r\n  payload: httpService.login({ email, password })\r\n});\r\n\r\nexport const logout = () => ({\r\n  type: types.LOGOUT.NAME\r\n});\r\n","import moment from \"moment\";\r\nimport { createActionPointers } from \"../tools/actionTools\";\r\nimport { getWeekArticles } from \"./appActions\";\r\nimport * as httpService from \"../services/httpService\";\r\n\r\nexport const types = createActionPointers([\r\n  `SET_CONFIG_STATE`,\r\n  \"NAVIGATE\",\r\n  \"NAVIGATE_HOME\",\r\n  \"GET_CONFIG\",\r\n  \"UPDATE_CONFIG\"\r\n]);\r\n\r\nexport const setConfigState = payload => ({\r\n  type: types.SET_CONFIG_STATE.NAME,\r\n  payload\r\n});\r\n\r\nexport const navigate = screen => ({\r\n  type: types.NAVIGATE.NAME,\r\n  payload: screen\r\n});\r\n\r\nexport const getConfig = () => ({\r\n  type: types.GET_CONFIG.NAME,\r\n  payload: httpService.getConfig()\r\n});\r\n\r\nexport const updateConfig = newConfig => ({\r\n  type: types.UPDATE_CONFIG.NAME,\r\n  payload: httpService.updateConfig(newConfig)\r\n});\r\n\r\nexport const navigateHome = () => dispatch => {\r\n  // Not in use\r\n  dispatch({ type: types.NAVIGATE_HOME.NAME });\r\n};\r\n\r\nexport const setNextWeek = () => (dispatch, getState) => {\r\n  const newDate = moment(getState().config.now).add(1, \"weeks\");\r\n  const week = parseInt(newDate.format(\"WW\"));\r\n  const year = parseInt(newDate.format(\"YYYY\"));\r\n  dispatch(\r\n    setConfigState({\r\n      now: newDate,\r\n      week,\r\n      year\r\n    })\r\n  );\r\n  return dispatch(getWeekArticles({ week, year }));\r\n};\r\n\r\nexport const setPrevWeek = () => (dispatch, getState) => {\r\n  const newDate = moment(getState().config.now).subtract(1, \"weeks\");\r\n  const week = parseInt(newDate.format(\"WW\"));\r\n  const year = parseInt(newDate.format(\"YYYY\"));\r\n  dispatch(\r\n    setConfigState({\r\n      now: newDate,\r\n      week,\r\n      year\r\n    })\r\n  );\r\n  return dispatch(getWeekArticles({ week, year }));\r\n};\r\n","import {createActionPointers} from '../tools/actionTools';\r\n\r\nconst types = createActionPointers([\r\n    'SET_LOCALE'\r\n]);\r\n\r\nexport const setLocale = (lang) => ({\r\n    type:types.SET_LOCALE.NAME,\r\n    payload:lang\r\n});","import * as appActions from './appActions';\r\nimport * as configActions from './configActions';\r\nimport * as localeActions from './localeActions';\r\nimport {bindActionCreators} from 'redux';\r\nimport { connect } from 'react-redux';\r\n\r\nexport const actions = {\r\n    app:appActions,\r\n    config:configActions,\r\n    locale:localeActions\r\n};\r\n\r\nexport const connector = (state, acts) => {\r\n    return connect(\r\n        state,\r\n        dispatch => () => bindActionCreators({\r\n            ...acts\r\n        }, dispatch)\r\n    );\r\n}\r\n\r\n\r\nfunction from(a) {\r\n    return function(actions = actions){\r\n        console.log(a);\r\n        console.log(actions);\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport headerImage from '../images/viikkis.png';\r\nimport {SCREENS} from '../constants';\r\nimport { ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\r\nimport { connector, actions } from '../actions';\r\n\r\nconst connect = connector(\r\n    state => ({\r\n        email:state.app.user.email,\r\n        logged:state.app.logged,\r\n        socketsLength:state.app.sockets.length,\r\n        isAdmin: state.app.user.admin\r\n    }), \r\n    {\r\n        logout:actions.app.logout,\r\n        navigate: actions.config.navigate\r\n    }\r\n);\r\n\r\nclass Header extends Component {\r\n    state = {\r\n        dropdownOpen:false\r\n    };\r\n\r\n    logout(){\r\n        localStorage.removeItem('email');\r\n        localStorage.removeItem('password');\r\n        this.props.logout();\r\n    }\r\n\r\n    render() {\r\n        const MenuButton = () => (\r\n            <ButtonDropdown isOpen={this.state.dropdownOpen} toggle={() => this.setState({dropdownOpen:!this.state.dropdownOpen})} direction={'left'}>\r\n                <DropdownToggle>\r\n                <i className=\"fa fa-bars\" style={{ fontSize: 30, color: 'white' }}></i>\r\n                </DropdownToggle>\r\n                <DropdownMenu>\r\n                <DropdownItem header>{this.props.email}</DropdownItem>\r\n                <DropdownItem divider />\r\n                <DropdownItem disabled><i className=\"fa fa-users\" style={{marginRight:5}}></i> {this.props.socketsLength} paikalla</DropdownItem>\r\n                <DropdownItem divider />\r\n                <DropdownItem disabled={this.props.isAdmin ? false : true}onClick={() => this.props.navigate(SCREENS.CONFIG_SETTINGS)}><i className=\"fa fa-cog\" style={{marginRight:5}}></i> Asetukset</DropdownItem>\r\n                <DropdownItem divider />\r\n                <DropdownItem onClick={() => this.logout()}><i className=\"fa fa-sign-out-alt\" style={{marginRight:5}}></i>Kirjaudu ulos</DropdownItem>\r\n                </DropdownMenu>\r\n            </ButtonDropdown>\r\n        );\r\n        return (\r\n            <div>\r\n\r\n                <div style={styles.top}>\r\n                    <div style={styles.left}>\r\n                        <img src={headerImage} alt=\"Viikkis Indecs\" style={{ height: 60 }} />\r\n                    </div>\r\n                    {this.props.logged && <div style={styles.right}>\r\n                        <MenuButton />\r\n                    </div>}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(Header)\r\n\r\nconst styles = {\r\n    top: {\r\n        backgroundColor: 'rgba(0,0,0,0.5)',\r\n        height: 60,\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        flex: 1,\r\n        color: 'white',\r\n        justifyContent:'space-between'\r\n    },\r\n    left: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        cursor:'pointer'\r\n    },\r\n    users: {\r\n        position:'absolute',\r\n        top:5,\r\n        right:5,\r\n        fontSize: 15, \r\n        color: 'white'\r\n    },\r\n    right: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'flex-end',\r\n        paddingRight: 10,\r\n        cursor: 'pointer'\r\n    },\r\n}","import React, { Component } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport { Button, Col, Container, Form, FormGroup, Input, Label } from 'reactstrap';\r\nimport Header from './Header';\r\nimport {connector, actions} from '../actions';\r\nconst connect = connector(\r\n    state => null, \r\n    {\r\n        login:actions.app.login\r\n    }\r\n);\r\n\r\nclass Login extends Component {\r\n    state = {\r\n        email: '',\r\n        password: '',\r\n        rememberMe: false\r\n    }\r\n\r\n    login() {\r\n        this.props.login({ password: this.state.password, email: this.state.email })\r\n            .then(() => {\r\n                if (this.state.rememberMe) {\r\n                    localStorage.setItem('email', this.state.email);\r\n                    localStorage.setItem('password', this.state.password);\r\n                }\r\n            })\r\n            .catch(() => toast.error('Väärä käyttäjätunnus tai salasana'))\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Header />\r\n                <div style={styles.wrapper}>\r\n                    <Container style={styles.container}>\r\n                        <h2>Kirjaudu sisään</h2>\r\n                        <Form className=\"form\">\r\n                            <Col>\r\n                                <FormGroup>\r\n                                    <Label>Sähköposti</Label>\r\n                                    <Input\r\n                                        type=\"email\"\r\n                                        name=\"email\"\r\n                                        id=\"exampleEmail\"\r\n                                        placeholder=\"sposti@sposti.com\"\r\n                                        value={this.state.email}\r\n                                        onChange={e => this.setState({ email: e.target.value })}\r\n                                    />\r\n                                </FormGroup>\r\n                            </Col>\r\n                            <Col>\r\n                                <FormGroup>\r\n                                    <Label for=\"examplePassword\">Salasana</Label>\r\n                                    <Input\r\n                                        type=\"password\"\r\n                                        name=\"password\"\r\n                                        id=\"examplePassword\"\r\n                                        placeholder=\"********\"\r\n                                        onChange={e => this.setState({ password: e.target.value })}\r\n                                        value={this.state.password}\r\n                                    />\r\n                                </FormGroup>\r\n                            </Col>\r\n                            <Col>\r\n                                <FormGroup check>\r\n                                    <Label check>\r\n                                        <Input\r\n                                            id=\"rememberMe\"\r\n                                            type=\"checkbox\"\r\n                                            value={this.state.rememberMe}\r\n                                            onChange={e => this.setState({ rememberMe: e.target.value })}\r\n                                        />{' '} Muista minut\r\n                                    </Label>\r\n                                </FormGroup>\r\n                            </Col>\r\n                            <Button onClick={() => this.login()}>Kirjaudu sisään</Button>\r\n                        </Form>\r\n                    </Container>\r\n                </div >\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(Login);\r\n\r\nconst styles = {\r\n    container: {\r\n        boxShadow: '#999 0 0 12px',\r\n        borderRadius: '4px',\r\n        backgroundColor: 'white',\r\n        padding: 20,\r\n        margin: 10\r\n    },\r\n    wrapper: {\r\n        flex: 1,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        bottom: 0,\r\n        right: 0\r\n    }\r\n}","function insert($vm, prefix, hint = '', subfix = '') {\r\n    const value = $vm.value\r\n    if ($vm.selectionStart || $vm.selectionStart === 0) {\r\n        let start = $vm.selectionStart\r\n        let end = $vm.selectionEnd\r\n\r\n        const restoreTop = $vm.scrollTop\r\n\r\n        if (start === end) {\r\n            $vm.value =\r\n                value.substring(0, start) +\r\n                prefix +\r\n                hint +\r\n                subfix +\r\n                value.substring(end, value.length)\r\n            $vm.selectionStart = start + prefix.length\r\n            $vm.selectionEnd = end + prefix.length + hint.length\r\n        } else {\r\n            $vm.value =\r\n                value.substring(0, start) +\r\n                prefix +\r\n                value.substring(start, end) +\r\n                subfix +\r\n                value.substring(end, value.length)\r\n            $vm.selectionStart = start + prefix.length\r\n            $vm.selectionEnd = end + prefix.length\r\n        }\r\n\r\n        $vm.focus()\r\n        if (restoreTop >= 0) {\r\n            $vm.scrollTop = restoreTop\r\n        }\r\n    }\r\n}\r\n\r\nconst toolbar = {\r\n    h1($vm) {\r\n        insert($vm, '# ', 'Iso otsikko')\r\n    },\r\n    h2($vm) {\r\n        insert($vm, '## ', 'Keskikokoinen otsikko')\r\n    },\r\n    h3($vm) {\r\n        insert($vm, '### ', 'Pieni otsikko')\r\n    },\r\n    bold($vm) {\r\n        insert($vm, '**', 'Lihavoitu teksti', '**')\r\n    },\r\n    italic($vm) {\r\n        insert($vm, '*', 'Kursivoitu teksti', '*')\r\n    },\r\n    image($vm) {\r\n        insert($vm, '![Kuvan vaihtoehtoinen teksti jos kuva ei toimi](', 'https://indecs.fi/indecs-fi/wp-content/uploads/2019/01/Indecs_logo_teksti.png', ')')\r\n    },\r\n    link($vm) {\r\n        insert($vm, '[FB-tapahtuma](', 'http://www.facebook.com', ')')\r\n    },\r\n    linkButton($vm) {\r\n        insert($vm, '?[FB-tapahtuma](', 'http://www.facebook.com', ')')\r\n    },\r\n    code($vm) {\r\n        insert($vm, '```\\n', 'Lainaus', '\\n```')\r\n    },\r\n    list($vm) {\r\n        insert($vm, 'Lista 1  \\nLista 2  \\n', 'Lista 3', '  ')\r\n    },\r\n    listUl($vm) {\r\n        insert($vm, '- Lista 1\\n- Lista 2\\n- ', 'Lista 3')\r\n    },\r\n    listOl($vm) {\r\n        insert($vm, '1. Lista 1\\n2. Lista 2\\n', '3. Lista 3')\r\n    },\r\n    table($vm) {\r\n        insert($vm, '| Otsikko 1 | Otsikko 2 | Otsikko 3 |\\n | - | - | - | \\n| ', 'tähän', ' | tulee | sisältö |\\n| toisen | rivin | sisältö |')\r\n    },\r\n    tab($vm) {\r\n        insert($vm, '  ')\r\n    }\r\n}\r\n\r\nexport default ($vm, type) => {\r\n    return toolbar[type]($vm)\r\n}\r\n","const KEY_CODE = {\r\n  F8: 119,\r\n  F9: 120,\r\n  F10: 121,\r\n  F11: 122,\r\n  F12: 123,\r\n  B: 66,\r\n  I: 73,\r\n  H: 72,\r\n  U: 85,\r\n  D: 68,\r\n  M: 77,\r\n  Q: 81,\r\n  O: 79,\r\n  L: 76,\r\n  S: 83,\r\n  Z: 90,\r\n  Y: 89,\r\n  C: 67,\r\n  T: 84,\r\n  R: 82,\r\n  DELETE: 8,\r\n  TAB: 9,\r\n  ENTER: 13,\r\n  ONE: 97,\r\n  TWO: 98,\r\n  THREE: 99,\r\n  FOUR: 100,\r\n  FIVE: 101,\r\n  SIX: 102,\r\n  _ONE: 49,\r\n  _TWO: 50,\r\n  _THREE: 51,\r\n  _FOUR: 52,\r\n  _FIVE: 53,\r\n  _SIX: 54\r\n}\r\n\r\nexport default ins => {\r\n  const $vm = ins.$vm\r\n  $vm.addEventListener('keydown', e => {\r\n    if (!(e.ctrlKey || e.metaKey) && !e.altKey && !e.shiftKey) {\r\n      switch (e.keyCode) {\r\n        case KEY_CODE.TAB: {\r\n          e.preventDefault()\r\n          ins.insert('tab')\r\n          break\r\n        }\r\n        default:break;\r\n      }\r\n    } else if ((e.ctrlKey || e.metaKey) && !e.altKey && !e.shiftKey) {\r\n      // ctrl +\r\n      switch (e.keyCode) {\r\n        case KEY_CODE.Z: {\r\n          // Z\r\n          e.preventDefault()\r\n          ins.undo()\r\n          break\r\n        }\r\n        case KEY_CODE.Y: {\r\n          // Y\r\n          e.preventDefault()\r\n          ins.redo()\r\n          break\r\n        }\r\n        case KEY_CODE.S: {\r\n          // S\r\n          e.preventDefault()\r\n          ins.save()\r\n          break\r\n        }\r\n        case KEY_CODE.B: {\r\n            e.preventDefault()\r\n            ins.insert('bold');\r\n            break;\r\n        }\r\n        case KEY_CODE.I: {\r\n            e.preventDefault()\r\n            ins.insert('italic');\r\n            break;\r\n        }\r\n        default:break;\r\n      }\r\n    }\r\n  })\r\n}\r\n","const Hljs = require('highlight.js/lib/highlight')\r\n\r\nHljs.registerLanguage('css', require('highlight.js/lib/languages/css'))\r\nHljs.registerLanguage('json', require('highlight.js/lib/languages/json'))\r\nHljs.registerLanguage('less', require('highlight.js/lib/languages/less'))\r\nHljs.registerLanguage('scss', require('highlight.js/lib/languages/scss'))\r\nHljs.registerLanguage(\r\n  'javascript',\r\n  require('highlight.js/lib/languages/javascript')\r\n)\r\nHljs.registerLanguage(\r\n  'typescript',\r\n  require('highlight.js/lib/languages/typescript')\r\n)\r\n\r\nexport default Hljs\r\n","import marked from 'marked'\r\nimport Hljs from './highlight'\r\n\r\nmarked.setOptions({\r\n  renderer: new marked.Renderer(),\r\n  gfm: true,\r\n  tables: true,\r\n  breaks: false,\r\n  pedantic: true,\r\n  sanitize: false,\r\n  smartLists: true,\r\n  smartypants: false,\r\n  highlight(code) {\r\n    return Hljs.highlightAuto(code).value\r\n  }\r\n})\r\n\r\n\r\nconst massReplace = (text, replacementArray) => {\r\n    let results = text;\r\n    for (let [regex, replacement] of replacementArray) {\r\n      results = results.replace(regex, replacement);\r\n    }\r\n    return results;\r\n}\r\n\r\nconst replace = (content) => {\r\n  const rules = [\r\n      [/\\?\\[(.+?)\\]\\((.*\\))/g, buttonParse('$1', '$2')]\r\n  ];\r\n  return massReplace(content, rules);\r\n}\r\n\r\nlet _1 = 0;\r\nlet _2 = 0;\r\nlet _3 = 0;\r\n\r\n\r\nconst renderer = new marked.Renderer()\r\n\r\n\r\nconst paragraphParse = text => `<p>${text}</p>`\r\n\r\nconst linkParse = (href, title, text) => {\r\n  return `<a href=${href}\r\n      title=${title || href}\r\n      }>${text}</a>`\r\n}\r\n\r\n\r\nconst headingParse = (text, level, raw) => {\r\n  if(level == 1) {\r\n      _3 = 0;\r\n      _2 = 0;\r\n      _1 = _1 + 1;\r\n      return `<h${level} id=\"toc_${_1}\">${_1}. ${text}</h${level}>`;\r\n  } else if (level == 2) {\r\n      _3 = 0;\r\n      _2 = _2 + 1;\r\n      return `<h${level} id=\"toc_${_1}_${_2}\">${_1}.${_2}. ${text}</h${level}>`;\r\n  } else {\r\n      _3 = _3 + 1;\r\n      return `<h${level} id=\"toc_${_1}_${_2}_${_3}\">${_1}.${_2}.${_3}. ${text}</h${level}>`;\r\n  }\r\n}\r\n\r\nconst buttonParse = (text, href) => {\r\n    return `<button class=\"customButton\" href=\"${href}\">${text}</button>`\r\n}\r\n\r\n\r\nrenderer.paragraph = paragraphParse\r\nrenderer.link = linkParse\r\nrenderer.heading = headingParse\r\n\r\nexport default content => {\r\n  if (typeof content != 'string') return ''\r\n  _1 = 0;\r\n  _2 = 0;\r\n  _3 = 0;\r\n  return  marked(replace(content), { renderer });\r\n}\r\n\r\n","import marked from 'marked'\r\nimport Hljs from './highlight'\r\n\r\nmarked.setOptions({\r\n  renderer: new marked.Renderer(),\r\n  gfm: true,\r\n  tables: true,\r\n  breaks: false,\r\n  pedantic: false,\r\n  sanitize: false,\r\n  smartLists: true,\r\n  smartypants: false,\r\n  highlight(code) {\r\n    return Hljs.highlightAuto(code).value\r\n  }\r\n})\r\n\r\nconst renderer = new marked.Renderer()\r\n\r\nlet _1 = 0;\r\nlet _2 = 0;\r\nlet _3 = 0;\r\n\r\n\r\nconst massReplace = (text, replacementArray) => {\r\n    let results = text;\r\n    for (let [regex, replacement] of replacementArray) {\r\n      results = results.replace(regex, replacement);\r\n    }\r\n    return results;\r\n}\r\n\r\n\r\nconst escape = (text) => {\r\n    return text;\r\n    return text\r\n        .replace(\"&\", '&amp;')\r\n        .replace(\"<\", '&lt;')\r\n        .replace(\">\", '&gt;')\r\n        .replace('\"', '&#34;')\r\n        .replace(\"'\", '&#39;')\r\n        .replace(\"!\", '&#33;')\r\n        .replace(\"?\", '&#63;')\r\n        .replace(\"#\", '&#35;')\r\n        // .replace(\\\\/g, '&#92;')\r\n        .replace(\"w\", '&#119;')\r\n}\r\n\r\nconst paragraphParse = text => {\r\n    // mj-class=\"paragraph\"\r\n    return `<mj-text><p>${escape(text)}</p></mj-text>\\n`;\r\n}\r\n\r\nconst linkParse = (href, title, text) => {\r\n    if(title) {\r\n        return `<a href=\"${escape(href)}\" title=\"${escape(title)}\">${escape(text)}</a>`;\r\n    }else {\r\n        return `<a href=\"${escape(href)}\">${escape(text)}</a>`;\r\n    }\r\n}\r\n\r\nconst headingParse = (text, level, raw) => {\r\n    if(level == 1) {\r\n        _3 = 0;\r\n        _2 = 0;\r\n        _1 = _1 + 1;\r\n        return `<mj-divider /><mj-text mj-class=\"heading${level}\">\\n<h${level} id=\"toc_${_1}\">${_1}. ${escape(text)}</h${level}></mj-text>\\n`;\r\n    } else if (level == 2) {\r\n        _3 = 0;\r\n        _2 = _2 + 1;\r\n        return `<mj-text mj-class=\"heading${level}\">\\n<h${level} id=\"toc_${_1}_${_2}\">${_1}.${_2}. ${escape(text)}</h${level}></mj-text>\\n`;\r\n    } else {\r\n        _3 = _3 + 1;\r\n        return `<mj-text mj-class=\"heading${level}\">\\n<h${level} id=\"toc_${_1}_${_2}_${_3}\">${_1}.${_2}.${_3}. ${escape(text)}</h${level}></mj-text>\\n`;\r\n    }\r\n}\r\n\r\nconst imageParse = (href, title, text) => {\r\n    if (title)\r\n        return `</mj-text><mj-image src=\"${href}\" alt=\"${escape(text)}\" title=\"${escape(title)}\" /> <mj-text>` \r\n    else\r\n        return `</mj-text><mj-image src=\"${href}\" alt=\"${escape(text)}\" /> <mj-text>`\r\n}\r\n\r\nconst tableParse = (header, body) => {\r\n    return  `<mj-table>\\n${header}${body}</mj-table>\\n`\r\n}\r\n\r\nconst tableRowParse = (content) => {\r\n    return `<tr>\\n${content}</tr>\\n`;\r\n}\r\n\r\nconst tableCellParse = (content, flags) => {\r\n    let tag = flags['header'] ? 'th' : 'td';\r\n    let align = flags['align'];\r\n    if(!align) \r\n        return `<${tag}>${content}</${tag}>\\n`\r\n    else\r\n        return `<${tag} style=\"text-align:${align}\">${escape(content)}</${tag}>\\n`\r\n}\r\n\r\nconst listParse = (body, ordered, start) => {\r\n    let tag = ordered ? 'ol' : 'ul';\r\n    return `<mj-text><${tag}>\\n${body}</${tag}></mj-text>\\n`;\r\n}\r\n\r\nconst listItemParse = (text) => {\r\n    return `<li>${escape(text)}</li>\\n`;\r\n}\r\n\r\nconst buttonParse = (text, href) => {\r\n    return `</mj-text><mj-button href=${href}>${text}</mj-button><mj-text>`\r\n}\r\n\r\nconst replace = (content) => {\r\n    const rules = [\r\n        [/\\?\\[(.+?)\\]\\((.*\\))/g, buttonParse('$1', '$2')]\r\n    ];\r\n    return massReplace(content, rules);\r\n}\r\n\r\n\r\nrenderer.paragraph = paragraphParse\r\nrenderer.link = linkParse\r\nrenderer.heading = headingParse\r\nrenderer.image = imageParse\r\nrenderer.table = tableParse\r\nrenderer.tablerow = tableRowParse\r\nrenderer.tablecell = tableCellParse\r\nrenderer.list = listParse\r\nrenderer.listitem = listItemParse\r\n\r\nexport default content => {\r\n  if (typeof content != 'string') return ''\r\n  _1 = 0;\r\n  _2 = 0;\r\n  _3 = 0;\r\n  return marked(replace(content), { renderer })\r\n}","import md2html from \"../editor/helpers/md2html\";\r\nimport md2mjml from \"../editor/helpers/md2mjml\";\r\n\r\nexport const formatTitle = (fi, en) => {\r\n  return en ? `${fi} – ${en}` : `${fi}`;\r\n};\r\n\r\nexport const lastEdited = editedAt => {\r\n  let templates = {\r\n    prefix: \"\",\r\n    suffix: \" sitten\",\r\n    seconds: \"alle minuutti\",\r\n    minute: \"noin minuutti\",\r\n    minutes: \"%d minuuttia\",\r\n    hour: \"noin tunti\",\r\n    hours: \"noin %d tuntia\",\r\n    day: \"päivä\",\r\n    days: \"%d päivää\",\r\n    month: \"noin kuukausi\",\r\n    months: \"%d kuukautta\",\r\n    year: \"noin vuosi\",\r\n    years: \"%d vuotta\"\r\n  };\r\n\r\n  let time = editedAt;\r\n\r\n  let template = function(t, n) {\r\n    return templates[t] && templates[t].replace(/%d/i, Math.abs(Math.round(n)));\r\n  };\r\n\r\n  if (time === \"0000-00-00 00:00:00\") return \"Ei muokattu\";\r\n  time = time.replace(/\\.\\d+/, \"\"); // remove milliseconds\r\n  time = time.replace(/-/, \"/\").replace(/-/, \"/\");\r\n  time = time.replace(/T/, \" \").replace(/Z/, \" UTC\");\r\n  time = time.replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/, \" $1$2\"); // -04:00 -> -0400\r\n  time = new Date(time * 1000 || time);\r\n\r\n  let now = new Date();\r\n  let seconds = ((now.getTime() - time) * 0.001) >> 0;\r\n  let minutes = seconds / 60;\r\n  let hours = minutes / 60;\r\n  let days = hours / 24;\r\n  let years = days / 365;\r\n\r\n  return (\r\n    \"muokattu \" +\r\n    templates.prefix +\r\n    ((seconds < 45 && template(\"seconds\", seconds)) ||\r\n      (seconds < 90 && template(\"minute\", 1)) ||\r\n      (minutes < 45 && template(\"minutes\", minutes)) ||\r\n      (minutes < 90 && template(\"hour\", 1)) ||\r\n      (hours < 24 && template(\"hours\", hours)) ||\r\n      (hours < 42 && template(\"day\", 1)) ||\r\n      (days < 30 && template(\"days\", days)) ||\r\n      (days < 45 && template(\"month\", 1)) ||\r\n      (days < 365 && template(\"months\", days / 30)) ||\r\n      (years < 1.5 && template(\"year\", 1)) ||\r\n      template(\"years\", years)) +\r\n    templates.suffix\r\n  );\r\n};\r\n\r\nexport const mdToHtml = md => {\r\n  if (typeof md === \"object\") {\r\n    md = md.join(\"\\n\\n\");\r\n  }\r\n    return md2html(headingCaps(md));\r\n};\r\nexport const mdToMjml = md => {\r\n  if (typeof md === \"object\") {\r\n    md = md.join(\"\\n\\n\");\r\n  }\r\n  return md2mjml(headingCaps(md));\r\n};\r\n\r\nexport const headingCaps = (md) => {\r\n  return md.split(\"\\n\").reduce((acc, str) => {\r\n    [\"#\", \"##\", \"###\"].map(i => {\r\n      if (str.substr(0, i.length) === i && str.charAt(i.length) !== \"#\")\r\n        str = [str.slice(0, i.length), \" \", str.slice(i.length)].join(\"\");\r\n    });\r\n\r\n    return acc + str + \"\\n\";\r\n  }, \"\")\r\n}\r\n\r\nexport const createMarkdownTOC = value => {\r\n  let _1 = 0;\r\n  let _2 = 0;\r\n  let _3 = 0;\r\n  return value\r\n    .replace(\"\\n\\n\", \"\\n\")\r\n    .split(\"\\n\")\r\n    .map(i => i.trim())\r\n    .filter(i => i.length > 0)\r\n    .reduce((acc, str) => {\r\n      if (str.substring(0, 3) === \"###\") {\r\n        _3 = _3 + 1;\r\n        return (\r\n          acc +\r\n          `    - [${_1}.${_2}.${_3}. ${str.replace(\r\n            \"###\",\r\n            \"\"\r\n          )}](#toc_${_1}_${_2}_${_3})\\n`\r\n        );\r\n      } else if (str.substring(0, 2) === \"##\") {\r\n        _3 = 0;\r\n        _2 = _2 + 1;\r\n        return (\r\n          acc +\r\n          `  - [${_1}.${_2}. ${str.replace(\"##\", \"\")}](#toc_${_1}_${_2})\\n`\r\n        );\r\n      } else if (str.substring(0, 1) === \"#\") {\r\n        _3 = 0;\r\n        _2 = 0;\r\n        _1 = _1 + 1;\r\n        return (\r\n          acc + `- [${_1}. ${str.replace(\"#\", \"\")}](#toc_${_1})\\n`\r\n        );\r\n      } else return acc;\r\n    }, []);\r\n};\r\n\r\nexport const createMjml = (content, config, week) => {\r\n  if (typeof content == \"array\") {\r\n    content = content.join(\"\\n\\n\");\r\n  }\r\n  return `\r\n<mjml>\r\n    <mj-head>\r\n        <mj-title>Indecsin Viikkotiedote ${config.number} — Indecs' Newsletter ${config.number}</mj-title>\r\n        <mj-style inline=\"inline\">\r\n        p       {{ font-size: 16px; margin: 10px 0px}}\r\n        h1      {{ font-size: 25px; font-weight:900; }}\r\n        h2      {{ font-size: 23px; font-weight:400}}\r\n        h3      {{ font-size: 21px; font-weight:400}}\r\n        tr th   {{ border-bottom:1px solid #ecedee;text-align:left }}\r\n        ul,ol   {{ margin: 10px 0px }}\r\n        ul ul, ol ol, ol ul, ul ol   {{ margin: 0px 0px }}\r\n\r\n        </mj-style>\r\n        <mj-font name=\"Source Sans Pro\" href=\"https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,200i,300,300i,400,400i,600,600i,700,700i,900,900i\"></mj-font>\r\n        <mj-attributes>\r\n            <mj-body background-color=\"#eeeeee\"></mj-body>\r\n            <mj-all font-family=\"Source Sans Pro, Helvetica, Arial, sans-serif\"></mj-all>\r\n            <mj-text font-size=\"16px\" font-weight=\"400\" color=\"#2e3131\" padding=\"0px 25px\" line-height=\"24px\"></mj-text>\r\n\r\n            <mj-class name=\"paragraph\" padding=\"0px 25px\"/>\r\n            <mj-class name=\"heading1\"  padding-top=\"10px\" padding-bottom=\"0px\" padding-left=\"25px\" padding-right=\"25px\" color=\"#2e3131\" text-transform=\"uppercase\" />\r\n            <mj-class name=\"heading2\" line-height=\"22px\" padding-top=\"27px\" padding-bottom=\"0px\" padding-left=\"25px\" padding-right=\"25px\" color=\"#C01F29\" />\r\n            <mj-class name=\"heading3\"  padding-top=\"0px\" padding-bottom=\"0px\" padding-left=\"25px\" padding-right=\"25px\" color=\"#C01F29\" />\r\n\r\n            <mj-button align=\"left\" background-color=\"#C01F29\" color=\"white\" padding-bottom=\"25px\" font-weight=\"900\" inner-padding=\"10px 18px\" text-transform=\"uppercase\" />\r\n            <mj-table></mj-table>\r\n            <mj-divider padding-bottom=\"50px\" padding-top=\"50px\" border-width=\"2px\" border-style=\"dashed\" border-color=\"silver\" /> \r\n            <mj-section background-color=\"white\"></mj-section>\r\n            <mj-column></mj-column>\r\n            <mj-text></mj-text>\r\n\r\n            <mj-accordion border=\"none\" padding=\"1px\" />\r\n            <mj-accordion-element icon-wrapped-url=\"http://i.imgur.com/Xvw0vjq.png\" icon-unwrapped-url=\"http://i.imgur.com/KKHenWa.png\" icon-height=\"24px\" icon-width=\"24px\" />\r\n            <mj-accordion-title font-family=\"Roboto, Open Sans, Helvetica, Arial, sans-serif\" background-color=\"#fff\" color=\"#031017\" padding=\"15px\" font-size=\"18px\" />\r\n            <mj-accordion-text font-family=\"Open Sans, Helvetica, Arial, sans-serif\" background-color=\"#fafafa\" padding=\"15px\" color=\"#505050\" font-size=\"14px\" />\r\n\r\n      </mj-attributes>\r\n    </mj-head>\r\n    <mj-body>\r\n        <mj-section>\r\n            <mj-column>\r\n                <mj-image width=\"200px\" padding-top=\"100px\" src=\"https://indecs.fi/indecs-fi/wp-content/uploads/2019/01/Indecs_logo_teksti.png\" /> \r\n                <mj-text font-size=\"22px\" font-weight=\"300\" padding-top=\"50px\" padding-bottom=\"2px\" color=\"black\" align=\"center\">${\r\n                  config.guild\r\n                }</mj-text>\r\n                <mj-text font-size=\"40px\" font-weight=\"900\" font-style=\"italic\" text-transform=\"uppercase\" line-height=\"40px\" padding-top=\"0px\" padding-bottom=\"2px\" color=\"#C01F29\" align=\"center\">Viikkotiedote</mj-text>\r\n                <mj-text font-size=\"22px\" font-weight=\"700\" padding-top=\"0px\" text-transform=\"uppercase\" padding-bottom=\"80px\" color=\"#2e3131\" align=\"center\">Numero ${config.number} — Viikko ${week}</mj-text>\r\n            </mj-column>\r\n        </mj-section>\r\n\r\n        <mj-section>\r\n            <mj-column>\r\n                ${mdToMjml(content)}\r\n            </mj-column>\r\n        </mj-section>\r\n\r\n        <mj-section>\r\n            <mj-column padding-bottom=\"120px\">\r\n                <mj-divider padding-top=\"70px\" padding-bottom=\"120px\" border-width=\"2px\" border-style=\"dashed\" border-color=\"silver\" /> \r\n                <mj-text font-size=\"20px\" font-weight=\"300\" padding-top=\"35px\" padding-bottom=\"10px\" color=\"black\" align=\"center\">Terveisin - Regards,</mj-text>\r\n                <mj-text font-size=\"35px\" font-weight=\"800\" text-transform=\"uppercase\" font-style=\"italic\" line-height=\"35px\" padding-top=\"0px\" padding-bottom=\"10px\" color=\"#C01F29\" align=\"center\">${\r\n                  config.name\r\n                }</mj-text>\r\n                <mj-text font-size=\"20px\" font-weight=\"800\" text-transform=\"uppercase\" padding-top=\"0px\" padding-bottom=\"10px\" color=\"#2e3131\" align=\"center\">${\r\n                  config.job\r\n                } / ${config.job_en}</mj-text>\r\n                <mj-text font-size=\"16px\" font-weight=\"300\" color=\"#2e3131\" align=\"center\">\r\n                    ${config.guild}<br>\r\n                    ${config.guild_en}<br>\r\n                    ${config.university}<br>\r\n                    ${config.university_en}<br>\r\n                    ${config.phone}<br>\r\n                    <a href=\"mailto:${config.email}\">${config.email}</a><br>\r\n                    <a href=\"${config.url}\">${config.url}</a>\r\n                </mj-text>\r\n            </mj-column>\r\n        </mj-section>\r\n    </mj-body>\r\n</mjml>\r\n`;\r\n};\r\n","import React from 'react'\r\nimport './index.css'\r\nimport classNames from 'classnames'\r\nimport textInsert from './helpers/insertText'\r\nimport keydownListen from './helpers/keydownListen'\r\nimport 'highlight.js/styles/tomorrow.css'\r\nimport './fonts/iconfont.css'\r\nimport { mdToHtml } from '../tools/articleTools';\r\n\r\nclass MdEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.$vm = null\r\n        this.handleEditorRef = $vm => {\r\n            this.$vm = $vm;\r\n        }\r\n\r\n        this.state = {\r\n            preview: window.innerWidth < 700 ? false : true,\r\n            expand: false,\r\n            f_history: [],\r\n            f_history_index: 0,\r\n            line_index: 1,\r\n            height:600,\r\n            width:1000\r\n        }\r\n        this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\r\n    }\r\n\r\n    static defaultProps = {\r\n        placeholder: '',\r\n        lineNum: true,\r\n        topValue:'',\r\n        bottomValue:''\r\n    }\r\n\r\n    componentDidMount() {\r\n        keydownListen(this);\r\n        this.updateWindowDimensions();\r\n        window.addEventListener('resize', this.updateWindowDimensions);\r\n    }\r\n\r\n    componentWillUpdate(props, state) {\r\n        const { f_history } = this.state\r\n        if (props.value && state.f_history.length === 0) {\r\n            f_history.push(props.value)\r\n            this.setState({\r\n                f_history\r\n            })\r\n            this.handleLineIndex(props.value)\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('resize', this.updateWindowDimensions);\r\n    }\r\n\r\n    updateWindowDimensions() {\r\n        this.setState({ width: window.innerWidth, height: window.innerHeight });\r\n    }\r\n\r\n    handleChange = e => {\r\n        const value = e.target.value\r\n        this.saveHistory(value)\r\n        this.props.onChange(value)\r\n    }\r\n\r\n    insert = e => {\r\n        const { $vm } = this\r\n        const type = e.currentTarget ? e.currentTarget.getAttribute('data-type') : e\r\n        textInsert($vm, type)\r\n        this.props.onChange($vm.value)\r\n        this.saveHistory($vm.value)\r\n    }\r\n\r\n    saveHistory(value) {\r\n        let { f_history, f_history_index } = this.state\r\n        window.clearTimeout(this.currentTimeout)\r\n        this.currentTimeout = setTimeout(() => {\r\n\r\n            if (f_history_index < f_history.length - 1) {\r\n                f_history.splice(f_history_index + 1)\r\n            }\r\n\r\n            if (f_history.length >= 20) {\r\n                f_history.shift()\r\n            }\r\n\r\n            f_history_index = f_history.length\r\n            f_history.push(value)\r\n            this.setState({\r\n                f_history,\r\n                f_history_index\r\n            })\r\n        }, 500)\r\n\r\n        this.handleLineIndex(value)\r\n    }\r\n\r\n    handleLineIndex(value) {\r\n        const line_index = value ? value.split('\\n').length : 1\r\n        this.setState({\r\n            line_index: line_index\r\n        })\r\n    }\r\n\r\n    undo = () => {\r\n        const { f_history } = this.state\r\n        let { f_history_index } = this.state\r\n        f_history_index = f_history_index - 1\r\n        if (f_history_index < 0) return\r\n        this.setState({\r\n            f_history_index\r\n        })\r\n        const value = f_history[f_history_index]\r\n        this.props.onChange(value)\r\n        this.handleLineIndex(value)\r\n    }\r\n\r\n    redo = () => {\r\n        const { f_history } = this.state\r\n        let { f_history_index } = this.state\r\n        f_history_index = f_history_index + 1\r\n        if (f_history_index >= f_history.length) return\r\n        this.setState({\r\n            f_history_index\r\n        })\r\n        const value = f_history[f_history_index]\r\n        this.props.onChange(value)\r\n        this.handleLineIndex(value)\r\n    }\r\n\r\n    preview = () => {\r\n        this.setState({\r\n            preview: !this.state.preview\r\n        })\r\n    }\r\n\r\n    expand = () => {\r\n        this.setState({\r\n            expand: !this.state.expand\r\n        })\r\n    }\r\n\r\n    save = () => {\r\n        this.props.onSave()\r\n    }\r\n\r\n    isMobile() {\r\n        return this.state.width < 700;\r\n    }\r\n\r\n    render() {\r\n        const { preview, expand, line_index } = this.state\r\n        const { value } = this.props\r\n        const previewClass = classNames({\r\n            'for-panel': true,\r\n            'for-preview-hidden': !preview,\r\n            \r\n        })\r\n        const editorClass = classNames({\r\n            'for-panel': true,\r\n            'for-editor-hidden':this.isMobile() ? preview : false\r\n        })\r\n        const previewActive = classNames({\r\n            'for-active': preview\r\n        })\r\n        const fullscreen = classNames({\r\n            'for-container': true,\r\n            'for-fullscreen': expand\r\n        })\r\n        const expandActive = classNames({\r\n            'for-active': expand\r\n        })\r\n        const lineNumStyles = classNames({\r\n            'for-line-num': true,\r\n            hidden: !this.props.lineNum\r\n        })\r\n\r\n        const lineNum = function () {\r\n            const list = []\r\n            for (let i = 0; i < line_index; i++) {\r\n                list.push(<li key={i + 1}>{i + 1}</li>)\r\n            }\r\n            return <ul className={lineNumStyles}>{list}</ul>\r\n        }\r\n\r\n\r\n        return (\r\n            <div className={fullscreen} style={{ height: this.state.expand ? this.state.height : this.state.height-100 }}>\r\n                <div className=\"for-controlbar\" style={{display:this.isMobile() ? 'block' : 'flex'}}>\r\n                    <ul>\r\n                        <li data-type=\"h1\" onClick={this.insert} title=\"Iso otsikko\">\r\n                            H1\r\n                        </li>\r\n                        <li data-type=\"h2\" onClick={this.insert} title=\"Keskikokoinen otsikko\">\r\n                            H2\r\n                        </li>\r\n                        <li data-type=\"h3\" onClick={this.insert} title=\"Pieni otsikko\">\r\n                            H3\r\n                        </li>\r\n                        <li data-type=\"bold\" onClick={this.insert} title=\"Lihavoitu teksti (ctrl+b)\">\r\n                            <i className=\"fa fa-bold\" />\r\n                        </li>\r\n                        <li data-type=\"italic\" onClick={this.insert} title=\"Kursivoitu teksti (ctrl+i)\">\r\n                            <i className=\"fa fa-italic\" />\r\n                        </li>\r\n                        <li data-type=\"image\" onClick={this.insert} title=\"Kuva\">\r\n                            <i className=\"foricon for-image\" />\r\n                        </li>\r\n                        <li data-type=\"link\" onClick={this.insert} title=\"Linkki\">\r\n                            <i className=\"foricon for-link\" />\r\n                        </li>\r\n                        <li data-type=\"linkButton\" onClick={this.insert} title=\"Linkki painike\">\r\n                            <i className=\"fab fa-facebook-square\" />\r\n                        </li>\r\n                        <li data-type=\"table\" onClick={this.insert} title=\"Taulukko\">\r\n                            <i className=\"fa fa-table\" />\r\n                        </li>\r\n                    </ul>\r\n                    <ul>\r\n                        <li data-type=\"list\" onClick={this.insert} title=\"Lista\">\r\n                            <i className=\"fa fa-list\" />\r\n                        </li>\r\n                        <li data-type=\"listUl\" onClick={this.insert} title=\"Täplä lista\">\r\n                            <i className=\"fa fa-list-ul\" />\r\n                        </li>\r\n                        <li data-type=\"listOl\" onClick={this.insert} title=\"Numeroitu lista\">\r\n                            <i className=\"fa fa-list-ol\" />\r\n                        </li>\r\n                        <li data-type=\"code\" onClick={this.save} title=\"Tallenna (ctrl+s)\">\r\n                            <i className=\"foricon for-save\" />\r\n                        </li>\r\n                        <li className={expandActive} onClick={this.expand}>\r\n                            {expandActive ? (\r\n                                <i className=\"foricon for-contract\" />\r\n                            ) : (\r\n                                    <i className=\"foricon for-expand\" />\r\n                                )}\r\n                        </li>\r\n                        <li className={previewActive} onClick={this.preview}>\r\n                            {previewActive ? (\r\n                                <i className=\"foricon for-eye-off\" />\r\n                            ) : (\r\n                                    <i className=\"foricon for-eye\" />\r\n                                )}\r\n                        </li>\r\n                        <li onClick={this.undo} title=\"Taaksepäin (ctrl+z)\">\r\n                            <i className=\"foricon for-undo\" />\r\n                        </li>\r\n                        <li onClick={this.redo} title=\"Eteenpäin (ctrl+y)\">\r\n                            <i className=\"foricon for-redo\" />\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div className=\"for-editor\">\r\n                    <div className={editorClass}>\r\n                        <div className=\"for-editor-wrapper\">\r\n                            {/* <div className=\"for-editor-wrapper-in\"> */}\r\n                            <div className=\"for-editor-block\">\r\n                                {lineNum()}\r\n                                <div className=\"for-editor-content\">\r\n                                    <pre>{value} </pre>\r\n                                    <textarea\r\n                                        ref={this.handleEditorRef}\r\n                                        value={value}\r\n                                        onChange={this.handleChange}\r\n                                        placeholder={this.props.placeholder}\r\n                                        spellCheck=\"false\"\r\n                                        autoCapitalize=\"off\"\r\n                                        autoCorrect=\"off\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            {/* </div> */}\r\n                        </div>\r\n                    </div>\r\n                    <div className={previewClass}>\r\n                        <div\r\n                            className=\"for-preview for-markdown-preview\"\r\n                            dangerouslySetInnerHTML={{ __html: mdToHtml(this.props.topValue + '\\n\\n' + value + '\\n\\n' + this.props.bottomValue) }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default MdEditor\r\n","import React, { Component } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport Editor from '../editor';\r\nimport {Alert} from 'reactstrap'\r\nimport Beforeunload from 'react-beforeunload';\r\nimport { connector, actions } from '../actions';\r\n\r\nconst connect = connector(\r\n    state => ({\r\n        socket:state.socket,\r\n        rooms:state.app.rooms,\r\n        id:state.config.articleId\r\n    }), \r\n    {\r\n        getArticle:actions.app.getArticle,\r\n        navigate:actions.config.navigate,\r\n        updateArticle:actions.app.updateArticle\r\n    }\r\n);\r\n\r\nclass Main extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.props.getText(value => this.setState({ value }));\r\n        this.state = {\r\n            value: '',\r\n            autoSave: true,\r\n            previousValue: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.initialize();\r\n    }\r\n\r\n    initialize() {\r\n        this.props.getArticle(this.props.id)\r\n            .then(({ action: { payload: { data } } }) => {\r\n                this.setState({\r\n                    value: data.text,\r\n                    previousValue:data.text\r\n                });\r\n\r\n                this.props.socket.emit('join room', data);\r\n                this.interval = setInterval(() => {\r\n                    if (this.isEdited()) {\r\n                        this.setState({previousValue:this.state.value});\r\n                        this.handleSave()\r\n                    }\r\n                }, 60000);\r\n            })\r\n            .catch(e => {\r\n                this.props.navigate('HOME');\r\n            })\r\n    }\r\n\r\n    isEdited(){\r\n        return this.state.value !== this.state.previousValue\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.interval);\r\n    }\r\n\r\n    reconnect() {\r\n        this.props.getArticle(this.props.id)\r\n        .then(({ action: { payload: { data } } }) => {\r\n            this.setState({\r\n                value: data.text,\r\n                previousValue:data.text,\r\n                disconnected:false\r\n            });\r\n            this.props.socket.emit('join room', data);\r\n        })\r\n        .catch(e => {\r\n            this.props.navigate('HOME');\r\n        })\r\n    }\r\n\r\n    handleChange = value => {\r\n        if(this.props.socket.disconnected) {\r\n            this.reconnect();\r\n        }else {\r\n            this.setState({\r\n                value,\r\n            });\r\n            this.props.socket.emit('set text', value);\r\n        }\r\n\r\n    }\r\n\r\n    handleSave() {\r\n        this.props.updateArticle({ id: this.props.id, text: this.state.value })\r\n            .then(() => toast.success(\"Artikkeli tallennettu\"))\r\n            .catch(() => toast.error(\"Virhe tallennettaessa artikkelia\"))\r\n    }\r\n\r\n    socketsOnline(){\r\n        const {rooms} = this.props;\r\n        const sockets = rooms[this.props.id] ? rooms[this.props.id].sockets : [];\r\n        return sockets.length > 1;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div style={{height:'100%'}}>\r\n                {this.isEdited() && <Beforeunload onBeforeunload={() => \"Haluatko varmasti poistua? Viimeisempiä muutoksia ei ole tallennettu.\"} />}\r\n                {this.socketsOnline() && <Alert color=\"warning\">\r\n                    Toinen käyttäjä on muokkaamassa tiedostoa!\r\n                </Alert>}\r\n                <div style={editorStyle}>\r\n                    <Editor\r\n                        value={this.state.value}\r\n                        onChange={this.handleChange}\r\n                        onSave={() => this.handleSave()}\r\n                    />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(Main)\r\n\r\nconst editorStyle = {\r\n    boxShadow: '#999 0 0 12px',\r\n    borderRadius: '4px'\r\n}","import React, { Component } from 'react'\r\nimport { Breadcrumb, BreadcrumbItem } from 'reactstrap';\r\nimport {formatTitle} from '../tools/articleTools';\r\nimport {SCREENS} from '../constants';\r\nimport { connector, actions } from '../actions';\r\n\r\nconst connect = connector(\r\n    state => ({\r\n        year:state.config.year,\r\n        week:state.config.week,\r\n        articleId:state.config.articleId,\r\n        screen:state.config.screen,\r\n        articles:state.app.articles\r\n    }), \r\n    {\r\n        navigate:actions.config.navigate\r\n    }\r\n);\r\n\r\nclass Nav extends Component {\r\n\r\n    render() {\r\n\r\n        const { year, week, articleId, screen, articles } = this.props;\r\n        const article = screen === SCREENS.ARTICLE && articles.find(a => a.id === articleId);\r\n        const title = article ? `${article.position}. ${formatTitle(article.title, article.title_en)}` : `Viikkotiedote`;\r\n        return (\r\n            <Breadcrumb>\r\n                <BreadcrumbItem onClick={() => this.props.navigate('HOME')}><a href=\"javascript:void(0)\">Viikkis {week}/{year}</a></BreadcrumbItem>\r\n                {(screen === SCREENS.ARTICLE || screen === SCREENS.SUMMARY) && <BreadcrumbItem active> {title}</BreadcrumbItem>}\r\n\r\n            </Breadcrumb>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(Nav)\r\n","import React, { Component } from \"react\";\r\nimport {\r\n  Button,\r\n  Modal,\r\n  ModalHeader,\r\n  ModalBody,\r\n  ModalFooter,\r\n  ButtonGroup,\r\n  Input\r\n} from \"reactstrap\";\r\nimport Editor from \"../editor\";\r\nimport { createMarkdownTOC, mdToHtml } from \"../tools/articleTools\";\r\nimport {\r\n  MD_CONFIG,\r\n  MD_CONFIG_TOC,\r\n  SUMMARY_BOTTOM,\r\n  SUMMARY_TOP,\r\n  EMAIL_SUBJECT\r\n} from \"../constants\";\r\nimport { connector, actions } from \"../actions\";\r\nimport { mjml2html, sendEmail } from \"../services/httpService\";\r\nimport { createMjml } from \"../tools/articleTools\";\r\nimport { toast } from \"react-toastify\";\r\n\r\n\r\nconst connect = connector(\r\n  state => ({\r\n    year: state.config.year,\r\n    week: state.config.week,\r\n    now: state.config.now,\r\n    socket: state.socket,\r\n    config: state.config.config,\r\n    isAdmin: state.app.user.admin,\r\n    summary: state.app.articles\r\n      .sort((a, b) => a.position - b.position)\r\n      .reduce((acc, a) => acc + \"\\n \\n\" + a.text, ``)\r\n  }),\r\n  {\r\n    getWeekArticles: actions.app.getWeekArticles,\r\n    setPrevWeek: actions.config.setPrevWeek,\r\n    setNextWeek: actions.config.setNextWeek\r\n  }\r\n);\r\n\r\nclass Summary extends Component {\r\n  state = {\r\n    showModal: false,\r\n    password:'',\r\n    recipient:this.props.config.recipient,\r\n    sender:this.props.config.sender,\r\n    attachments:[]\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.props.getWeekArticles({\r\n      year: this.props.year,\r\n      week: this.props.week\r\n    });\r\n  }\r\n\r\n  toggleModal() {\r\n    this.setState({ showModal: !this.state.showModal });\r\n  }\r\n\r\n  createBlob(format, content) {\r\n    const fileName = `${this.props.year}-${this.props.week}-viikkis.${format}`;\r\n    let element = document.createElement(\"a\");\r\n    let file = new Blob([content], { type: \"text/plain\" });\r\n    element.href = URL.createObjectURL(file);\r\n    element.download = fileName;\r\n    element.click();\r\n  }\r\n\r\n  exportHtml() {\r\n    // md -> mjml -> html\r\n    const tableOfContents = createMarkdownTOC(this.props.summary);\r\n    const mjml = createMjml(\r\n      [tableOfContents, this.props.summary],\r\n      this.props.config,\r\n      this.props.week\r\n    );\r\n    mjml2html(mjml)\r\n      .then(res => res.json())\r\n      .then(res => this.createBlob(\"html\", res.html))\r\n      .catch(e => toast.error(\"virhe\"));\r\n  }\r\n\r\n  sendEmail(){\r\n      const tableOfContents = createMarkdownTOC(this.props.summary);\r\n      const mjml = createMjml([tableOfContents, this.props.summary], this.props.config, this.props.week);\r\n      const {sender, recipient, password, attachments} = this.state;\r\n      const subject = EMAIL_SUBJECT(this.props.config);\r\n      sendEmail(mjml, sender, recipient, password, subject, attachments)\r\n      .then((res) => {\r\n        if (res.status === 200) {\r\n          toast.success(\"Sähköposti lähetetty\")\r\n        } else {\r\n          toast.error(\"Ongelma sähköpostin lähetyksessä\")\r\n        }\r\n      })\r\n      .catch(e => toast.error(\"Ongelma sähköpostin lähetyksessä\"));\r\n  }\r\n\r\n  exportMd() {\r\n    let content = (\r\n      MD_CONFIG(this.props.config, this.props.week) +\r\n      MD_CONFIG_TOC +\r\n      this.props.summary\r\n    ).replace(/\\n/g, \"\\r\\n\");\r\n    this.createBlob(\"md\", content);\r\n  }\r\n\r\n  exportMjml() {\r\n    const tableOfContents = createMarkdownTOC(this.props.summary);\r\n    const mjml = createMjml(\r\n      [tableOfContents, this.props.summary],\r\n      this.props.config,\r\n      this.props.week\r\n    ).replace(/\\n/g, \"\\r\\n\");\r\n    this.createBlob(\"txt\", mjml);\r\n  }\r\n\r\n  render() {\r\n    const tableOfContents = createMarkdownTOC(this.props.summary);\r\n    const topValue = SUMMARY_TOP(\r\n      this.props.week,\r\n      tableOfContents,\r\n      this.props.config\r\n    );\r\n    const bottomValue = SUMMARY_BOTTOM(this.props.config);\r\n    const editorStyle = {\r\n      boxShadow: \"#999 0 0 12px\",\r\n      borderRadius: \"4px\"\r\n    };\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <Modal isOpen={this.state.showModal} toggle={() => this.toggleModal()}>\r\n          <ModalHeader>Lataa tai lähetä viikkis</ModalHeader>\r\n          <ModalBody>\r\n              <h5>Lähetä viikkis sähköpostilla</h5>\r\n              Vastaanottajan sähköposti:\r\n              <Input\r\n                  name=\"recipient\"\r\n                  type=\"email\"\r\n                  value={this.state.recipient}\r\n                  onChange={e => this.setState({ recipient: e.target.value })}\r\n              />\r\n              Liitteet:\r\n              <Input type=\"file\" multiple name=\"file\" onChange={e => this.setState({attachments:Array.from(e.target.files)})}/>\r\n              <hr />\r\n              Lähettäjän sähköposti:\r\n              <Input\r\n                  name=\"sender\"\r\n                  type=\"email\"\r\n                  value={this.state.sender}\r\n                  onChange={e => this.setState({ sender: e.target.value })}\r\n              />\r\n              Lähettäjän salasana:\r\n              <Input\r\n                  name=\"email_password\"\r\n                  type=\"password\"\r\n                  value={this.state.password}\r\n                  onChange={e => this.setState({ password: e.target.value })}\r\n              />\r\n              <Button block className=\"mt-2\" color=\"success\" onClick={() => this.sendEmail()}>\r\n                <i className=\"fa fa-envelope\" /> Lähetä\r\n              </Button>\r\n          </ModalBody>\r\n          <ModalFooter>\r\n            <ButtonGroup>\r\n              <Button color=\"info\" onClick={() => this.exportMd()}>\r\n                <i className=\"fa fa-download\" /> MD\r\n              </Button>\r\n              <Button color=\"primary\" onClick={() => this.exportHtml()}>\r\n                <i className=\"fa fa-download\" /> HTML\r\n              </Button>\r\n              <Button color=\"warning\" onClick={() => this.exportMjml()}>\r\n                <i className=\"fa fa-download\" /> MJML\r\n              </Button>\r\n            </ButtonGroup>\r\n          </ModalFooter>\r\n        </Modal>\r\n\r\n        {this.props.isAdmin && <Button color=\"success\" block onClick={() => this.toggleModal()}>\r\n          Lataa tai lähetä viikkis\r\n        </Button>}\r\n\r\n        <div style={editorStyle}>\r\n          <Editor\r\n            topValue={topValue}\r\n            bottomValue={bottomValue}\r\n            value={this.props.summary}\r\n            onChange={() => {}}\r\n            onSave={() => {}}\r\n          />\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(Summary);\r\n","import React, { Component } from \"react\";\r\nimport { Button, Form, FormGroup, Label, Input, Col, Row } from \"reactstrap\";\r\nimport { formatTitle } from \"../tools/articleTools\";\r\nimport { TITLES } from \"../constants\";\r\nimport { connector, actions } from \"../actions\";\r\nimport { toast } from \"react-toastify\";\r\nimport * as httpService from \"../services/httpService\";\r\n\r\nconst connect = connector(\r\n  state => ({\r\n    year: state.config.year,\r\n    week: state.config.week,\r\n    number: state.config.config.number\r\n  }),\r\n  {\r\n    createWeek: actions.app.createWeek,\r\n    updateConfig: actions.config.updateConfig\r\n  }\r\n);\r\n\r\nclass CreateWeek extends Component {\r\n  state = {\r\n    articles: TITLES.map((title, i) => ({\r\n      year: this.props.year,\r\n      week: this.props.week,\r\n      title: title.fi,\r\n      title_en: title.en,\r\n      text: `# ${formatTitle(title.fi, title.en)} \\n\\n`,\r\n      text_en: ``\r\n    }))\r\n  };\r\n\r\n  createWeek() {\r\n    if (this.state.articles.find(article => article.title.trim() === \"\")) {\r\n      toast.error(\"Kaikki suomenkieliset kentät ovat pakollisia!\");\r\n      return;\r\n    }\r\n    const articles = this.state.articles.map((a, i) => ({\r\n      ...a,\r\n      position: i + 1,\r\n      text: a.text || `# ${formatTitle(a.title, a.title_en)} \\n\\n`,\r\n      year: this.props.year,\r\n      week: this.props.week\r\n    }));\r\n    \r\n    let nextNumber = this.props.number+1;\r\n    if (this.props.week < 6 && this.props.number > 8) {\r\n      nextNumber = 1;\r\n    }\r\n\r\n    this.props.createWeek(articles);\r\n    this.props.updateConfig({number:nextNumber})\r\n  }\r\n\r\n  deleteTitle(i) {\r\n    this.setState({\r\n      articles: this.state.articles.reduce(\r\n        (acc, obj, ind) => (ind === i ? acc : [...acc, obj]),\r\n        []\r\n      )\r\n    });\r\n  }\r\n\r\n  changeArticle(e, i) {\r\n    this.setState({\r\n      articles: this.state.articles.map((article, index) =>\r\n        i === index ? { ...article, [e.target.name]: e.target.value } : article\r\n      )\r\n    });\r\n  }\r\n\r\n  async copyPrevWeek() {\r\n    try {\r\n      const response = await httpService.getWeekArticles({\r\n        week: this.props.week - 1,\r\n        year: this.props.year\r\n      });\r\n      const data = response.data;\r\n      if (data.length === 0) throw new Error(\"Ei viime viikon tuloksia\");\r\n      this.setState({\r\n        articles: data\r\n          .sort((a, b) => a.position - b.position)\r\n          .map(a => ({\r\n            title: a.title,\r\n            title_en: a.title_en,\r\n            text: a.text,\r\n            text_en: a.text_en,\r\n            year: this.props.year,\r\n            week: this.props.week,\r\n            position: a.position\r\n          }))\r\n      });\r\n    } catch (e) {\r\n      toast.error(\"Virhe ladatessa viime viikkoa\");\r\n    }\r\n  }\r\n\r\n  addTitle() {\r\n    this.setState({ articles: [...this.state.articles, { fi: \"\", en: \"\" }] });\r\n  }\r\n\r\n  render() {\r\n    const { articles } = this.state;\r\n\r\n    return (\r\n      <div style={{ backgroundColor: \"white\", padding: 20 }}>\r\n        <Button color=\"warning\" block onClick={() => this.copyPrevWeek()}>\r\n          Kopioi viime viikko\r\n        </Button>\r\n        <Form>\r\n          {articles.map((article, i) => (\r\n            <div style={styles.box}>\r\n              <Button\r\n                style={styles.button}\r\n                color=\"danger\"\r\n                onClick={() => this.deleteTitle(i)}\r\n              >\r\n                X\r\n              </Button>\r\n              <FormGroup key={i} row>\r\n                <div style={styles.index}>\r\n                  <h2>{i + 1}.</h2>\r\n                </div>\r\n                <Label for={`fi`} sm={2}>\r\n                  Otsikko (fi)\r\n                </Label>\r\n                <Col sm={10}>\r\n                  <Input\r\n                    type=\"text\"\r\n                    name=\"title\"\r\n                    required\r\n                    placeholder=\"Otsikko suomeksi (pakollinen)\"\r\n                    value={article.title}\r\n                    onChange={e => this.changeArticle(e, i)}\r\n                  />\r\n                </Col>\r\n                <Label for={`en`} sm={2}>\r\n                  Otsikko (en)\r\n                </Label>\r\n                <Col sm={10}>\r\n                  <Input\r\n                    type=\"text\"\r\n                    name=\"title_en\"\r\n                    placeholder=\"Otsikko englanniksi (ei pakollinen)\"\r\n                    value={article.title_en}\r\n                    onChange={e => this.changeArticle(e, i)}\r\n                  />\r\n                </Col>\r\n              </FormGroup>\r\n\r\n              <Input\r\n                style={{ height: 200 }}\r\n                type=\"textarea\"\r\n                name=\"text\"\r\n                placeholder=\"Teksti\"\r\n                value={article.text}\r\n                onChange={e => this.changeArticle(e, i)}\r\n              />\r\n            </div>\r\n          ))}\r\n          <Button color=\"info\" block onClick={() => this.addTitle()}>\r\n            Lisää uusi otsikko\r\n          </Button>\r\n\r\n          <Button\r\n            color=\"success\"\r\n            size=\"lg\"\r\n            block\r\n            onClick={() => this.createWeek()}\r\n          >\r\n            Luo viikkis!\r\n          </Button>\r\n        </Form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(CreateWeek);\r\n\r\nconst styles = {\r\n  box: {\r\n    position: \"relative\",\r\n    marginTop: 10,\r\n    backgroundColor: \"rgba(0,0,0,0.07)\",\r\n    borderRadius: 3,\r\n    boxShadow: \"#999 0 0 7px\",\r\n    border: \"1px solid darkgray\",\r\n    padding: `60px 10px 10px 10px`\r\n  },\r\n  button: {\r\n    position: \"absolute\",\r\n    top: 0,\r\n    right: 0,\r\n    zIndex: 999\r\n  },\r\n  index: {\r\n    position: \"absolute\",\r\n    top: 5,\r\n    left: 5,\r\n    zIndex: 999\r\n  }\r\n};\r\n","import React, { Component } from 'react';\r\nimport { Badge, Button, ListGroup, ListGroupItem } from 'reactstrap';\r\nimport CreateWeek from './CreateWeek';\r\nimport { formatTitle, lastEdited } from '../tools/articleTools';\r\nimport { connector, actions } from '../actions';\r\n\r\nconst connect = connector(\r\n    state => ({\r\n        articles:state.app.articles.sort((a, b) => a.position - b.position),\r\n        socket:state.socket,\r\n        rooms:state.app.rooms,\r\n        year:state.config.year,\r\n        week:state.config.week,\r\n        isAdmin: state.app.user.admin\r\n    }), \r\n    {\r\n        deleteArticle:actions.app.deleteArticle,\r\n        setConfigState:actions.config.setConfigState,\r\n        navigate:actions.config.navigate\r\n    }\r\n);\r\n\r\nclass WeekList extends Component {\r\n\r\n    socketsOnline(id) {\r\n        const { rooms } = this.props;\r\n        const sockets = rooms[id] ? rooms[id].sockets : [];\r\n        return sockets.length > 0;\r\n    }\r\n\r\n    deleteArticle(id) {\r\n        const bool = window.confirm('Haluatko varmasti poistaa artikkelin?');\r\n        if (bool) {\r\n            this.props.deleteArticle(id)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {articles} = this.props;\r\n\r\n        const NoArticles = () => {\r\n            return (\r\n                <div style={{textAlign:'center', paddingTop:20, paddingBottom:20}}>\r\n                    <i className=\"fa fa-database\" style={{fontSize:60}} />\r\n                    <h2>Ei artikkeleja</h2>\r\n                    <h5>Sihteeri ei ole vielä luonut tämän viikon artikkeleja</h5>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return articles.length === 0 ? (\r\n            this.props.isAdmin ? <CreateWeek /> : <NoArticles />\r\n        ) : (\r\n                <React.Fragment>\r\n                    <Button block color=\"success\" onClick={() => this.props.navigate('SUMMARY')}>Näytä kooste viikkotiedotteesta</Button>\r\n                    <ListGroup flush>\r\n                        {\r\n                            articles.map(article => (\r\n\r\n                                <ListGroupItem key={article.id} >\r\n                                    <a href=\"javascript:void(0)\" onClick={() => this.props.setConfigState({ articleId: article.id, screen: 'ARTICLE' })}>\r\n                                        {article.position}. {formatTitle(article.title, article.title_en)}\r\n                                    </a>\r\n                                    <br />\r\n\r\n                                    <Badge color=\"success\">{article.text.length} merkkiä</Badge> {' '}\r\n                                    <Badge color=\"warning\">{lastEdited(article.edited_at)}</Badge> {' '}\r\n                                    {this.socketsOnline(article.id) && <Badge color=\"info\">joku muokkaamassa</Badge>}\r\n                                    \r\n                                    {this.props.isAdmin && <Button color=\"danger\" outline size=\"sm\" style={{ float: 'right' }} onClick={() => this.deleteArticle(article.id)}>X</Button>}\r\n\r\n                                </ListGroupItem>\r\n                            ))\r\n                        }\r\n                    </ListGroup>\r\n                </React.Fragment>\r\n            )\r\n    }\r\n}\r\n\r\nexport default connect(WeekList)","import moment from \"moment\";\r\nimport React, { Component } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport WeekList from \"./WeekList\";\r\nimport { Button } from \"reactstrap\";\r\nimport { connector, actions } from \"../actions\";\r\n\r\nconst connect = connector(\r\n  state => ({\r\n    year: state.config.year,\r\n    week: state.config.week,\r\n    now: state.config.now,\r\n    socket: state.socket\r\n  }),\r\n  {\r\n    getWeekArticles: actions.app.getWeekArticles,\r\n    setPrevWeek: actions.config.setPrevWeek,\r\n    setNextWeek: actions.config.setNextWeek,\r\n    getConfig: actions.config.getConfig\r\n  }\r\n);\r\n\r\nclass WeekContainer extends Component {\r\n  state = {\r\n    failed: true,\r\n    loaded: false\r\n  };\r\n  componentDidMount() {\r\n    this.init();\r\n    this.props.socket.emit(\"leave room\");\r\n  }\r\n\r\n  async init() {\r\n    try {\r\n      await this.props.getWeekArticles({\r\n        year: this.props.year,\r\n        week: this.props.week\r\n      });\r\n      this.props.getConfig();\r\n      this.setState({ failed: false, loaded: true });\r\n    } catch (e) {\r\n      toast.error(\"Ei internet yhteyttä palvelimeen\");\r\n      this.setState({ failed: true, loaded: true });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { year, week, now } = this.props;\r\n    const startOfWeek = moment(now).startOf(\"isoWeek\");\r\n    const endOfWeek = moment(now).endOf(\"isoWeek\");\r\n    const { loaded, failed } = this.state;\r\n    return (\r\n      <div style={styles.wrapper}>\r\n        <div style={styles.container}>\r\n          <Button\r\n            onClick={() => this.props.setPrevWeek()}\r\n            style={styles.left}\r\n            color=\"link\"\r\n          >\r\n            <h1>\r\n              <i className=\"fa fa-angle-left\"></i>\r\n            </h1>\r\n          </Button>\r\n          <div style={styles.center}>\r\n            <h1>Viikko {week}</h1>\r\n            <h3>\r\n              {startOfWeek.format(\"DD.MM.YYYY\")} -{\" \"}\r\n              {endOfWeek.format(\"DD.MM.YYYY\")}\r\n            </h3>\r\n          </div>\r\n          <Button\r\n            onClick={() => this.props.setNextWeek()}\r\n            style={styles.right}\r\n            color=\"link\"\r\n          >\r\n            <h1>\r\n              <i className=\"fa fa-angle-right\"></i>\r\n            </h1>\r\n          </Button>\r\n        </div>\r\n        {loaded && !failed && <WeekList />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(WeekContainer);\r\n\r\nconst styles = {\r\n  wrapper: {\r\n    backgroundColor: \"white\",\r\n    boxShadow: \"#999 0 0 12px\",\r\n    borderRadius: \"4px\"\r\n  },\r\n  container: {\r\n    flex: 1,\r\n    flexDirection: \"row\",\r\n    display: \"flex\"\r\n  },\r\n  left: {\r\n    flex: 0.1,\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    cursor: \"pointer\",\r\n    borderRadius: 0\r\n  },\r\n  center: {\r\n    flex: 0.8,\r\n    flexDirection: \"column\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\"\r\n  },\r\n  right: {\r\n    flex: 0.1,\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    cursor: \"pointer\"\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { connector, actions } from \"../actions\";\r\nimport { Col, Input, Row, Button } from \"reactstrap\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst connect = connector(\r\n  state => ({\r\n    config: state.config.config\r\n  }),\r\n  {\r\n    updateConfig: actions.config.updateConfig\r\n  }\r\n);\r\n\r\nclass ConfigSettings extends React.Component {\r\n  state = this.props.config;\r\n\r\n  changeConfig(e) {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  }\r\n\r\n  updateConfig() {\r\n    this.props.updateConfig(this.state)\r\n      .then(() => toast.success(\"Asetukset päivitetty\"))\r\n      .catch(e => toast.error(\"Virhe asetuksien päivityksessä\"));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={styles.box}>\r\n        <h1>Sihteerin asetukset</h1>\r\n        <Row>\r\n          {Object.entries(this.state)\r\n            .filter(i => i[0] !== \"id\")\r\n            .map(([key, value]) => (\r\n              <Col xs=\"6\" sm=\"4\">\r\n                {key}:\r\n                <Input\r\n                  type=\"text\"\r\n                  name={key}\r\n                  placeholder={key}\r\n                  value={value}\r\n                  onChange={e => this.changeConfig(e)}\r\n                />\r\n              </Col>\r\n            ))}\r\n        </Row>\r\n        <Button\r\n          color=\"success\"\r\n          size=\"lg\"\r\n          block\r\n          onClick={() => this.updateConfig()}\r\n        >\r\n          Tallenna asetukset\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(ConfigSettings);\r\n\r\nconst styles = {\r\n  box: {\r\n    position: \"relative\",\r\n    marginTop: 10,\r\n    backgroundColor: \"white\",\r\n    borderRadius: 3,\r\n    boxShadow: \"#999 0 0 7px\",\r\n    border: \"1px solid darkgray\",\r\n    padding: `60px 10px 10px 10px`\r\n  }\r\n};\r\n","import React from 'react';\r\nimport {connector} from '../actions';\r\nimport { Container } from 'reactstrap';\r\nimport { SCREENS } from '../constants';\r\nimport Article from './Article';\r\nimport Header from './Header';\r\nimport NavBar from './NavBar';\r\nimport Summary from './Summary';\r\nimport WeekContainer from './WeekContainer';\r\nimport ConfigSettings from './ConfigSettings';\r\n\r\nconst connect = connector(\r\n    state => ({\r\n        screen:state.config.screen\r\n    })\r\n);\r\n\r\nclass MainContainer extends React.Component {\r\n\r\n    navigation() {\r\n        switch (this.props.screen) {\r\n            case SCREENS.SUMMARY:\r\n                return <Summary />\r\n            case SCREENS.ARTICLE:\r\n                return <Article getText={this.props.getText}/>\r\n            case SCREENS.CONFIG_SETTINGS:\r\n                return <ConfigSettings/>\r\n            default:\r\n                return <WeekContainer />\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Header />\r\n                <NavBar />\r\n                <Container style={{ marginBottom: 20 }}>\r\n                    {this.navigation()}\r\n                </Container>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(MainContainer)","import React from 'react';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nexport const LoadingComponent = () => {\r\n    return (\r\n        <div style={styles.loader}>\r\n            <div style={styles.container}>\r\n                <h1 style={styles.text}>Ladataan...</h1>\r\n                <Loader\r\n                    type=\"Puff\"\r\n                    color=\"#00BFFF\"\r\n                    height=\"100\"\r\n                    width=\"100\"\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst styles = {\r\n    loader: {\r\n        zIndex: 10000,\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n        backgroundColor: 'transparent',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        color: 'white'\r\n    },\r\n    container: { backgroundColor: 'rgba(0,0,0,0.5)', padding: 40, display: 'flex', justifyContent: 'center', alignItems: 'center' },\r\n    text: { color: 'white' }\r\n}","import React, { Component } from 'react';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport Login from './Login';\r\nimport Navigator from './Navigator';\r\nimport { LoadingComponent } from '../components'\r\nimport { connector, actions } from '../actions';\r\n\r\nconst connect = connector(\r\n    state => ({\r\n        loading:state.app.loading,\r\n        socket:state.socket,\r\n        logged:state.app.logged\r\n    }), \r\n    {\r\n        login:actions.app.login,\r\n        setState:actions.app.setState\r\n    }\r\n);\r\n\r\nclass ScreenContainer extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.props.socket.on('get rooms', (rooms) => this.props.setState({ rooms }));\r\n        this.props.socket.on('get sockets', (sockets) => this.props.setState({ sockets }));\r\n        this.getText = (cb) => this.props.socket.on('get text', cb);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const email = localStorage.getItem('email');\r\n        const password = localStorage.getItem('password');\r\n        if (email && password) {\r\n            this.props.login({ email, password })\r\n                .catch(() => {\r\n                    localStorage.removeItem('email');\r\n                    localStorage.removeItem('password');\r\n                })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <ToastContainer\r\n                    style={{ zIndex: 100000 }}\r\n                    position=\"bottom-right\"\r\n                    autoClose={5000}\r\n                    hideProgressBar={false}\r\n                    newestOnTop={false}\r\n                    closeOnClick\r\n                    rtl={false}\r\n                    pauseOnVisibilityChange\r\n                    draggable\r\n                    pauseOnHover={false}\r\n                />\r\n                {\r\n                    this.props.loading && <LoadingComponent />\r\n                }\r\n                {\r\n                    this.props.logged ? <Navigator getText={this.getText} /> : <Login />\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(ScreenContainer)\r\n","import { types } from \"../actions/appActions\";\r\nimport { toast } from \"react-toastify\";\r\nlet initialState = {\r\n  loading: false,\r\n  articles: [],\r\n  config: {\r\n    year: null,\r\n    week: null,\r\n    number: null,\r\n    guild: null,\r\n    guild_en: null,\r\n    subject: null,\r\n    url: null,\r\n    name: null,\r\n    job: null,\r\n    job_en: null,\r\n    university: null,\r\n    university_en: null,\r\n    phone: null,\r\n    email: null\r\n  },\r\n  rooms: {},\r\n  logged: false,\r\n  user: {\r\n    admin:false,\r\n    email:''\r\n  },\r\n  sockets: []\r\n};\r\n\r\nconst appReducer = (state = initialState, { payload, type }) => {\r\n  switch (type) {\r\n    case types.SET_STATE.NAME:\r\n      return { ...state, ...payload };\r\n\r\n    case types.GET_ARTICLES.PENDING:\r\n    case types.CREATE_WEEK.PENDING:\r\n    case types.GET_ARTICLE.PENDING:\r\n    case types.DELETE_ARTICLE.PENDING:\r\n    case types.GET_WEEK_ARTICLES.PENDING:\r\n    case types.GET_WEEK_CONFIG.PENDING:\r\n    case types.LOGIN.PENDING:\r\n      return { ...state, loading: true };\r\n\r\n    case types.GET_ARTICLES.REJECTED:\r\n    case types.CREATE_WEEK.REJECTED:\r\n    case types.DELETE_ARTICLE.REJECTED:\r\n    case types.GET_ARTICLE.REJECTED:\r\n    case types.GET_WEEK_ARTICLES.REJECTED:\r\n    case types.GET_WEEK_CONFIG.REJECTED:\r\n      toast.error(\"Ei internet yhteyttä palvelimeen\");\r\n      return { ...state, loading: false };\r\n\r\n    case types.GET_ARTICLES.FULFILLED:\r\n      return { ...state, loading: false, articles: payload.data };\r\n\r\n    case types.LOGIN.REJECTED:\r\n      return { ...state, loading: false };\r\n\r\n    case types.CREATE_WEEK.FULFILLED:\r\n      return {\r\n        ...state,\r\n        articles: [...state.articles, ...payload],\r\n        loading: false\r\n      };\r\n\r\n    case types.GET_ARTICLE.FULFILLED:\r\n      return {\r\n        ...state,\r\n        articles: state.articles.map(a => (a.id === payload.id ? payload : a)),\r\n        loading: false\r\n      };\r\n\r\n    case types.DELETE_ARTICLE.FULFILLED:\r\n      return {\r\n        ...state,\r\n        articles: state.articles.reduce(\r\n          (acc, a) => (a.id === payload.data ? acc : [...acc, a]),\r\n          []\r\n        ),\r\n        loading: false\r\n      };\r\n\r\n    case types.GET_WEEK_ARTICLES.FULFILLED:\r\n      return { ...state, articles: payload.data, loading: false };\r\n\r\n    case types.GET_WEEK_CONFIG.FULFILLED:\r\n      return {\r\n        ...state,\r\n        config: payload.data.length > 0 ? payload.data[0] : initialState.config,\r\n        loading: false\r\n      };\r\n\r\n    case types.LOGIN.FULFILLED:\r\n      return { ...state, user: payload.data, logged: true, loading: false };\r\n\r\n    case types.LOGOUT.NAME:\r\n      return { ...state, user: initialState.user, logged: false };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default appReducer;\r\n","import { types } from \"../actions/configActions\";\r\nimport moment from \"moment\";\r\nlet initialState = {\r\n  loading: false,\r\n  year: parseInt(moment().format(\"YYYY\")),\r\n  week: parseInt(moment().format(\"WW\")),\r\n  now: moment()\r\n    .day(\"Wednesday\")\r\n    .year(moment().format(\"YYYY\"))\r\n    .week(moment().format(\"WW\")),\r\n  screen: null,\r\n  articleId: null,\r\n  config: {\r\n    email: \"\",\r\n    guild: \"\",\r\n    guild_en: \"\",\r\n    id: \"\",\r\n    job: \"\",\r\n    job_en: \"\",\r\n    name: \"\",\r\n    phone: \"\",\r\n    university: \"\",\r\n    university_en: \"\",\r\n    url: \"\",\r\n    sender:\"\",\r\n    recipient:\"\",\r\n    number:0\r\n  }\r\n};\r\n\r\nconst configReducer = (state = initialState, { payload, type }) => {\r\n  switch (type) {\r\n    case types.SET_CONFIG_STATE.NAME:\r\n      return { ...state, ...payload };\r\n    case types.NAVIGATE.NAME:\r\n      return { ...state, screen: payload };\r\n    case types.NAVIGATE_HOME.NAME:\r\n      return initialState;\r\n    case types.GET_CONFIG.FULFILLED:\r\n      return {\r\n        ...state,\r\n        config: payload.data\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default configReducer;\r\n","import { combineReducers } from 'redux';\r\nimport appReducer from './appReducer';\r\nimport io from 'socket.io-client';\r\nimport {SOCKET_ENDPOINT} from '../constants'\r\nimport configReducer from './configReducer';\r\nconst socketReducer = io(SOCKET_ENDPOINT);\r\n\r\nconst rootReducer = combineReducers({\r\n    app: appReducer,\r\n    config: configReducer,\r\n    socket: () => socketReducer\r\n})\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport reducers from './reducers';\r\nimport promise from \"redux-promise-middleware\"\r\nimport { createLogger } from 'redux-logger';\r\n\r\nconst loggerMiddleWare = createLogger({ predicate:(getState, action) => true});\r\nconst middleWares = applyMiddleware(promise(), thunk, loggerMiddleWare);\r\n\r\nexport default createStore(reducers, middleWares);","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import 'react-app-polyfill/ie11';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ScreenContainer from './containers/ScreenContainer'\r\nimport {Provider} from 'react-redux';\r\nimport store from './store';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport './bootstrap.css';\r\nimport './index.css';\r\n\r\nReactDOM.render(<Provider store={store}><ScreenContainer /></Provider>, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}